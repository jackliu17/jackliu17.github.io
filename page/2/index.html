<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="D3Af5_wNyfCxpGOmu04o8yJ6Y4au_48rBuja2NxHLOs" />










  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Cowboy Tech" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Cowboy Tech">
<meta property="og:url" content="http://jackliu17.github.io/page/2/index.html">
<meta property="og:site_name" content="Cowboy Tech">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cowboy Tech">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Cowboy Tech </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Cowboy Tech</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">The best preparation for tomorrow is doing your best today</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/04/GCD学习笔记/" itemprop="url">
                  GCD学习笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-04T08:57:43+11:00" content="2016-10-04">
              2016-10-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IT/" itemprop="url" rel="index">
                    <span itemprop="name">IT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/04/GCD学习笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/10/04/GCD学习笔记/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="多线程基础"><a href="#多线程基础" class="headerlink" title="多线程基础"></a>多线程基础</h1><h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><p>进程是指在系统中正在运行的一个应用程序</p>
<p>每个进程之间是独立的，每个进程均运行在其专用且受保护的内存空间内</p>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><p>1个进程要想执行任务，必须得有线程（每1个进程至少要有1条线程，称为主线程）</p>
<p>一个进程（程序）的所有任务都在线程中执行</p>
<h2 id="进程和线程的比较"><a href="#进程和线程的比较" class="headerlink" title="进程和线程的比较"></a>进程和线程的比较</h2><ol>
<li><p>线程是CPU调用(执行任务)的最小单位。</p>
</li>
<li><p>进程是CPU分配资源的最小单位。</p>
</li>
<li><p>一个进程中至少要有一个线程。</p>
</li>
<li><p>同一个进程内的线程共享进程的资源。</p>
</li>
</ol>
<h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><p>1个进程中可以开启多条线程，每条线程可以并行（同时）执行不同的任务</p>
<p>多线程技术可以提高程序的执行效率</p>
<p>同一时间，CPU只能处理1条线程，只有1条线程在工作（执行），多线程并发（同时）执行，其实是CPU快速地在多条线程之间调度（切换），如果CPU调度线程的时间足够快，就造成了多线程并发执行的假象。</p>
<h1 id="GCD"><a href="#GCD" class="headerlink" title="GCD"></a>GCD</h1><h2 id="任务执行方式"><a href="#任务执行方式" class="headerlink" title="任务执行方式"></a>任务执行方式</h2><h3 id="同步执行："><a href="#同步执行：" class="headerlink" title="同步执行："></a>同步执行：</h3><p>只能在当前线程中执行任务，不具备开启新线程的能力，任务立刻马上执行，会阻塞当前线程并等待 Block中的任务执行完毕，然后当前线程才会继续往下运行</p>
<h3 id="异步执行："><a href="#异步执行：" class="headerlink" title="异步执行："></a>异步执行：</h3><p>可以在新的线程中执行任务，具备开启新线程的能力，但不一定会开新线程，当前线程会直接往下执行，不会阻塞当前线程</p>
<h2 id="队列："><a href="#队列：" class="headerlink" title="队列："></a>队列：</h2><p>即用来存放任务的队列。队列是一种特殊的线性表，采用FIFO（先进先出）的原则，即新任务总是被插入到队列的末尾，而读取任务的时候总是从队列的头部开始读取。每读取一个任务，则从队列中释放一个任务。在GCD中有两种队列：串行队列和并发队列。</p>
<h3 id="串行队列（Serial-Dispatch-Queue）"><a href="#串行队列（Serial-Dispatch-Queue）" class="headerlink" title="串行队列（Serial Dispatch Queue）"></a>串行队列（Serial Dispatch Queue）</h3><p>让任务一个接着一个地执行（一个任务执行完毕后，再执行下一个任务）</p>
<h3 id="并发队列（Concurrent-Dispatch-Queue）"><a href="#并发队列（Concurrent-Dispatch-Queue）" class="headerlink" title="并发队列（Concurrent Dispatch Queue）"></a>并发队列（Concurrent Dispatch Queue）</h3><p>可以让多个任务并发（同时）执行（自动开启多个线程同时执行任务）,并发功能只有在异步（dispatch_async）函数下才有效</p>
<h2 id="GCD的使用"><a href="#GCD的使用" class="headerlink" title="GCD的使用"></a>GCD的使用</h2><h3 id="队列的创建"><a href="#队列的创建" class="headerlink" title="队列的创建"></a>队列的创建</h3><p>创建并发队列</p>
<pre><code>dispatch_queue_t queue = dispatch_queue_create(&quot;com.xxcc&quot;, DISPATCH_QUEUE_CONCURRENT);
</code></pre><p>GCD默认已经提供了全局并发队列</p>
<pre><code>dispatch_queue_t quque1 =  dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
</code></pre><p>创建串行队列</p>
<pre><code>dispatch_queue_t queue = dispatch_queue_create(&quot;com.xxcc&quot;, DISPATCH_QUEUE_SERIAL);
</code></pre><p>获得主队列</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dispatch_queue_t  queue = dispatch_get_main_queue();</span><br></pre></td></tr></table></figure>
<h3 id="任务的执行"><a href="#任务的执行" class="headerlink" title="任务的执行"></a>任务的执行</h3><p>队列在queue中，任务在block块中</p>
<p>同步函数：要求立刻马上开始执行</p>
<pre><code>/*
第一个参数:队列
第二个参数:block,在里面封装任务
*/
dispatch_sync(queue, ^{

});
</code></pre><p>异步函数 ：等主线程执行完毕之后，回过头开线程执行任务</p>
<pre><code>dispatch_async(queue, ^{

});
</code></pre><h1 id="GCD的使用-1"><a href="#GCD的使用-1" class="headerlink" title="GCD的使用"></a>GCD的使用</h1><h2 id="六种组合使用"><a href="#六种组合使用" class="headerlink" title="六种组合使用"></a>六种组合使用</h2><ol>
<li><p>并发队列 + 同步执行: 无新线程，串行执行 </p>
</li>
<li><p>并发队列 + 异步执行：有新线程，并发执行</p>
</li>
<li><p>串行队列 + 同步执行: 无新线程，串行执行</p>
</li>
<li><p>串行队列 + 异步执行：有1条新线程，并发执行</p>
</li>
<li><p>主队列 + 同步执行: 无新线程，串行执行 </p>
</li>
<li><p>主队列 + 异步执行: 无新线程，串行执行 </p>
</li>
</ol>
<h2 id="并发队列-同步执行"><a href="#并发队列-同步执行" class="headerlink" title="并发队列 + 同步执行"></a>并发队列 + 同步执行</h2><ol>
<li><p>所有任务都是在主线程中执行的,不会开启新线程，由于只有一个线程，所以任务只能一个一个执行。</p>
</li>
<li><p>所有任务都在打印的syncConcurrent—begin和syncConcurrent—end之间，这说明任务是添加到队列中马上执行的。</p>
</li>
</ol>
<pre><code>- (void) syncConcurrent
{
    NSLog(@&quot;syncConcurrent---begin&quot;);

    dispatch_queue_t queue= dispatch_queue_create(&quot;test.queue&quot;, DISPATCH_QUEUE_CONCURRENT);

    dispatch_sync(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;1------%@&quot;,[NSThread currentThread]);
        }
    });
    dispatch_sync(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;2------%@&quot;,[NSThread currentThread]);
        }
    });
    dispatch_sync(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;3------%@&quot;,[NSThread currentThread]);
        }
    });

    NSLog(@&quot;syncConcurrent---end&quot;);
}

2016-10-04 12:28:52.933 FL_GCD_DEMO[6892:714486] syncConcurrent---begin
2016-10-04 12:28:52.933 FL_GCD_DEMO[6892:714486] 1------&lt;NSThread: 0x61800006d8c0&gt;{number = 1, name = main}
2016-10-04 12:28:52.934 FL_GCD_DEMO[6892:714486] 1------&lt;NSThread: 0x61800006d8c0&gt;{number = 1, name = main}
2016-10-04 12:28:52.934 FL_GCD_DEMO[6892:714486] 2------&lt;NSThread: 0x61800006d8c0&gt;{number = 1, name = main}
2016-10-04 12:28:52.934 FL_GCD_DEMO[6892:714486] 2------&lt;NSThread: 0x61800006d8c0&gt;{number = 1, name = main}
2016-10-04 12:28:52.934 FL_GCD_DEMO[6892:714486] 3------&lt;NSThread: 0x61800006d8c0&gt;{number = 1, name = main}
2016-10-04 12:28:52.934 FL_GCD_DEMO[6892:714486] 3------&lt;NSThread: 0x61800006d8c0&gt;{number = 1, name = main}
2016-10-04 12:28:52.935 FL_GCD_DEMO[6892:714486] syncConcurrent---end
</code></pre><h2 id="并发队列-异步执行"><a href="#并发队列-异步执行" class="headerlink" title="并发队列 + 异步执行"></a>并发队列 + 异步执行</h2><ol>
<li><p>除了主线程，又开启了3个线程，并且任务是交替着同时执行的。</p>
</li>
<li><p>所有任务是在打印的syncConcurrent—begin和syncConcurrent—end之后才开始执行的。说明任务不是马上执行，而是将所有任务添加到队列之后才开始同步执行。</p>
</li>
</ol>
<pre><code>- (void) asyncConcurrent
{
    NSLog(@&quot;asyncConcurrent---begin&quot;);

    dispatch_queue_t queue= dispatch_queue_create(&quot;test.queue&quot;, DISPATCH_QUEUE_CONCURRENT);

    dispatch_async(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;1------%@&quot;,[NSThread currentThread]);
        }
    });
    dispatch_async(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;2------%@&quot;,[NSThread currentThread]);
        }
    });
    dispatch_async(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;3------%@&quot;,[NSThread currentThread]);
        }
    });

    NSLog(@&quot;asyncConcurrent---end&quot;);
}

2016-10-04 12:41:45.567 FL_GCD_DEMO[7091:747862] asyncConcurrent---begin
2016-10-04 12:41:45.568 FL_GCD_DEMO[7091:747862] asyncConcurrent---end
2016-10-04 12:41:45.568 FL_GCD_DEMO[7091:747987] 1------&lt;NSThread: 0x610000071900&gt;{number = 3, name = (null)}
2016-10-04 12:41:45.568 FL_GCD_DEMO[7091:747986] 2------&lt;NSThread: 0x60000006f380&gt;{number = 4, name = (null)}
2016-10-04 12:41:45.568 FL_GCD_DEMO[7091:747989] 3------&lt;NSThread: 0x60800006f800&gt;{number = 5, name = (null)}
2016-10-04 12:41:45.568 FL_GCD_DEMO[7091:747987] 1------&lt;NSThread: 0x610000071900&gt;{number = 3, name = (null)}
2016-10-04 12:41:45.568 FL_GCD_DEMO[7091:747986] 2------&lt;NSThread: 0x60000006f380&gt;{number = 4, name = (null)}
2016-10-04 12:41:45.568 FL_GCD_DEMO[7091:747989] 3------&lt;NSThread: 0x60800006f800&gt;{number = 5, name = (null)}
</code></pre><h2 id="串行队列-同步执行"><a href="#串行队列-同步执行" class="headerlink" title="串行队列 + 同步执行"></a>串行队列 + 同步执行</h2><ol>
<li><p>不会开启新线程，在当前线程执行任务。任务是串行的，执行完一个任务，再执行下一个任务</p>
</li>
<li><p>所有任务是在打印的syncConcurrent—begin和syncConcurrent—end之后才开始执行的。说明任务不是马上执行，而是将所有任务添加到队列之后才开始同步执行。</p>
</li>
</ol>
<pre><code>- (void) syncSerial
{
    NSLog(@&quot;syncSerial---begin&quot;);

    dispatch_queue_t queue = dispatch_queue_create(&quot;test.queue&quot;, DISPATCH_QUEUE_SERIAL);

    dispatch_sync(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;1------%@&quot;,[NSThread currentThread]);
        }
    });    
    dispatch_sync(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;2------%@&quot;,[NSThread currentThread]);
        }
    });
    dispatch_sync(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;3------%@&quot;,[NSThread currentThread]);
        }
    });

    NSLog(@&quot;syncSerial---end&quot;);
}

2016-10-04 12:46:10.354 FL_GCD_DEMO[7152:759077] syncSerial---begin
2016-10-04 12:46:10.355 FL_GCD_DEMO[7152:759077] 1------&lt;NSThread: 0x60800007b580&gt;{number = 1, name = main}
2016-10-04 12:46:10.355 FL_GCD_DEMO[7152:759077] 1------&lt;NSThread: 0x60800007b580&gt;{number = 1, name = main}
2016-10-04 12:46:10.355 FL_GCD_DEMO[7152:759077] 2------&lt;NSThread: 0x60800007b580&gt;{number = 1, name = main}
2016-10-04 12:46:10.355 FL_GCD_DEMO[7152:759077] 2------&lt;NSThread: 0x60800007b580&gt;{number = 1, name = main}
2016-10-04 12:46:10.355 FL_GCD_DEMO[7152:759077] 3------&lt;NSThread: 0x60800007b580&gt;{number = 1, name = main}
2016-10-04 12:46:10.356 FL_GCD_DEMO[7152:759077] 3------&lt;NSThread: 0x60800007b580&gt;{number = 1, name = main}
2016-10-04 12:46:10.356 FL_GCD_DEMO[7152:759077] syncSerial---end
</code></pre><h2 id="串行队列-异步执行"><a href="#串行队列-异步执行" class="headerlink" title="串行队列 + 异步执行"></a>串行队列 + 异步执行</h2><ol>
<li><p>会开启新线程，但是因为任务是串行的，执行完一个任务，再执行下一个任务</p>
</li>
<li><p>所有任务是在打印的syncConcurrent—begin和syncConcurrent—end之后才开始执行的。说明任务不是马上执行，而是将所有任务添加到队列之后才开始同步执行。</p>
</li>
</ol>
<pre><code>- (void) asyncSerial
{
    NSLog(@&quot;asyncSerial---begin&quot;);

    dispatch_queue_t queue = dispatch_queue_create(&quot;test.queue&quot;, DISPATCH_QUEUE_SERIAL);

    dispatch_async(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;1------%@&quot;,[NSThread currentThread]);
        }
    });    
    dispatch_async(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;2------%@&quot;,[NSThread currentThread]);
        }
    });
    dispatch_async(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;3------%@&quot;,[NSThread currentThread]);
        }
    });

    NSLog(@&quot;asyncSerial---end&quot;);
}

2016-10-04 15:22:49.819 FL_GCD_DEMO[8557:1007533] asyncSerial---begin
2016-10-04 15:22:49.819 FL_GCD_DEMO[8557:1007533] asyncSerial---end
2016-10-04 15:22:49.819 FL_GCD_DEMO[8557:1007620] 1------&lt;NSThread: 0x610000068940&gt;{number = 3, name = (null)}
2016-10-04 15:22:49.820 FL_GCD_DEMO[8557:1007620] 1------&lt;NSThread: 0x610000068940&gt;{number = 3, name = (null)}
2016-10-04 15:22:49.820 FL_GCD_DEMO[8557:1007620] 2------&lt;NSThread: 0x610000068940&gt;{number = 3, name = (null)}
2016-10-04 15:22:49.820 FL_GCD_DEMO[8557:1007620] 2------&lt;NSThread: 0x610000068940&gt;{number = 3, name = (null)}
2016-10-04 15:22:49.820 FL_GCD_DEMO[8557:1007620] 3------&lt;NSThread: 0x610000068940&gt;{number = 3, name = (null)}
2016-10-04 15:22:49.820 FL_GCD_DEMO[8557:1007620] 3------&lt;NSThread: 0x610000068940&gt;{number = 3, name = (null)}
</code></pre><h2 id="主队列-同步执行"><a href="#主队列-同步执行" class="headerlink" title="主队列 + 同步执行"></a>主队列 + 同步执行</h2><pre><code>- (void)syncMain
{
    NSLog(@&quot;syncMain---begin&quot;);

    dispatch_queue_t queue = dispatch_get_main_queue();

    dispatch_sync(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;1------%@&quot;,[NSThread currentThread]);
        }
    });
    dispatch_sync(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;2------%@&quot;,[NSThread currentThread]);
        }
    });
    dispatch_sync(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;3------%@&quot;,[NSThread currentThread]);
        }
    });   

    NSLog(@&quot;syncMain---end&quot;);
}
</code></pre><p>互等卡住不可行(在主线程中调用),dispatch_sync需要立即执行，而现在正在执行syncMain,除非将syncMain放到其他线程</p>
<pre><code>dispatch_queue_t queue = dispatch_queue_create(&quot;test.queue&quot;, DISPATCH_QUEUE_CONCURRENT);

dispatch_async(queue, ^{
    [self syncMain];
});
</code></pre><h2 id="主队列-异步执行"><a href="#主队列-异步执行" class="headerlink" title="主队列 + 异步执行"></a>主队列 + 异步执行</h2><pre><code>- (void)asyncMain
{
    NSLog(@&quot;asyncMain---begin&quot;);

    dispatch_queue_t queue = dispatch_get_main_queue();

    dispatch_async(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;1------%@&quot;,[NSThread currentThread]);
        }
    });    
    dispatch_async(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;2------%@&quot;,[NSThread currentThread]);
        }
    });
    dispatch_async(queue, ^{
        for (int i = 0; i &lt; 2; ++i) {
            NSLog(@&quot;3------%@&quot;,[NSThread currentThread]);
        }
    });  

    NSLog(@&quot;asyncMain---end&quot;);
}

2016-10-04 16:09:35.551 FL_GCD_DEMO[9244:1128884] 1------&lt;NSThread: 0x618000078700&gt;{number = 1, name = main}
2016-10-04 16:09:35.551 FL_GCD_DEMO[9244:1128884] 1------&lt;NSThread: 0x618000078700&gt;{number = 1, name = main}
2016-10-04 16:09:35.552 FL_GCD_DEMO[9244:1128884] 2------&lt;NSThread: 0x618000078700&gt;{number = 1, name = main}
2016-10-04 16:09:35.552 FL_GCD_DEMO[9244:1128884] 2------&lt;NSThread: 0x618000078700&gt;{number = 1, name = main}
2016-10-04 16:09:35.552 FL_GCD_DEMO[9244:1128884] 3------&lt;NSThread: 0x618000078700&gt;{number = 1, name = main}
2016-10-04 16:09:35.552 FL_GCD_DEMO[9244:1128884] 3------&lt;NSThread: 0x618000078700&gt;{number = 1, name = main}
</code></pre><h2 id="其他线程中返回到主线程"><a href="#其他线程中返回到主线程" class="headerlink" title="其他线程中返回到主线程"></a>其他线程中返回到主线程</h2><pre><code>dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    for (int i = 0; i &lt; 2; ++i) {
        NSLog(@&quot;1------%@&quot;,[NSThread currentThread]);
    }

    // 回到主线程
    dispatch_async(dispatch_get_main_queue(), ^{
        NSLog(@&quot;2-------%@&quot;,[NSThread currentThread]);
    });
});
</code></pre><h2 id="栅栏方法-dispatch-barrier-async"><a href="#栅栏方法-dispatch-barrier-async" class="headerlink" title="栅栏方法 dispatch_barrier_async"></a>栅栏方法 dispatch_barrier_async</h2><p>异步执行两组操作，而且第一组操作执行完之后，才能开始执行第二组操作。这样我们就需要一个相当于栅栏一样的一个方法将两组异步执行的操作组给分割起来，当然这里的操作组里可以包含一个或多个任务。这就需要用到dispatch_barrier_async方法在两个操作组间形成栅栏。</p>
<pre><code>- (void)barrier
{
    dispatch_queue_t queue = dispatch_queue_create(&quot;12312312&quot;, DISPATCH_QUEUE_CONCURRENT);

    dispatch_async(queue, ^{
        NSLog(@&quot;----1-----%@&quot;, [NSThread currentThread]);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;----2-----%@&quot;, [NSThread currentThread]);
    });

    dispatch_barrier_async(queue, ^{
        NSLog(@&quot;----barrier-----%@&quot;, [NSThread currentThread]);
    });

    dispatch_async(queue, ^{
        NSLog(@&quot;----3-----%@&quot;, [NSThread currentThread]);
    });
    dispatch_async(queue, ^{
        NSLog(@&quot;----4-----%@&quot;, [NSThread currentThread]);
    });
}

2016-10-04 16:23:38.931 FL_GCD_DEMO[9572:1168918] ----1-----&lt;NSThread: 0x60000006e280&gt;{number = 3, name = (null)}
2016-10-04 16:23:38.931 FL_GCD_DEMO[9572:1168921] ----2-----&lt;NSThread: 0x60000006e240&gt;{number = 4, name = (null)}
2016-10-04 16:23:38.932 FL_GCD_DEMO[9572:1168921] ----barrier-----&lt;NSThread: 0x60000006e240&gt;{number = 4, name = (null)}
2016-10-04 16:23:38.932 FL_GCD_DEMO[9572:1168921] ----3-----&lt;NSThread: 0x60000006e240&gt;{number = 4, name = (null)}
2016-10-04 16:23:38.932 FL_GCD_DEMO[9572:1168918] ----4-----&lt;NSThread: 0x60000006e280&gt;{number = 3, name = (null)}
</code></pre><h2 id="延时执行方法-dispatch-after"><a href="#延时执行方法-dispatch-after" class="headerlink" title="延时执行方法 dispatch_after"></a>延时执行方法 dispatch_after</h2><pre><code>dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
    // 2秒后异步执行这里的代码...
NSLog(@&quot;run-----&quot;);
});
</code></pre><h2 id="一次性代码-dispatch-once"><a href="#一次性代码-dispatch-once" class="headerlink" title="一次性代码 dispatch_once"></a>一次性代码 dispatch_once</h2><p>使用dispatch_once函数能保证某段代码在程序运行过程中只被执行1次。</p>
<pre><code>static dispatch_once_t onceToken;
dispatch_once(&amp;onceToken, ^{
    // 只执行1次的代码(这里面默认是线程安全的)
});
</code></pre><h2 id="多线程同时遍历-dispatch-apply"><a href="#多线程同时遍历-dispatch-apply" class="headerlink" title="多线程同时遍历 dispatch_apply"></a>多线程同时遍历 dispatch_apply</h2><pre><code>dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

dispatch_apply(6, queue, ^(size_t index) {
    NSLog(@&quot;%zd------%@&quot;,index, [NSThread currentThread]);
});

2016-10-04 16:30:58.280 FL_GCD_DEMO[9720:1191743] 1------&lt;NSThread: 0x610000067840&gt;{number = 3, name = (null)}
2016-10-04 16:30:58.280 FL_GCD_DEMO[9720:1191746] 3------&lt;NSThread: 0x610000067800&gt;{number = 5, name = (null)}
2016-10-04 16:30:58.280 FL_GCD_DEMO[9720:1191744] 2------&lt;NSThread: 0x60000006a200&gt;{number = 4, name = (null)}
2016-10-04 16:30:58.280 FL_GCD_DEMO[9720:1191661] 0------&lt;NSThread: 0x610000060e80&gt;{number = 1, name = main}
2016-10-04 16:30:58.280 FL_GCD_DEMO[9720:1191762] 4------&lt;NSThread: 0x610000067880&gt;{number = 6, name = (null)}
2016-10-04 16:30:58.280 FL_GCD_DEMO[9720:1191763] 5------&lt;NSThread: 0x610000067b00&gt;{number = 7, name = (null)}
</code></pre><h2 id="队列组-dispatch-group"><a href="#队列组-dispatch-group" class="headerlink" title="队列组 dispatch_group"></a>队列组 dispatch_group</h2><p>分别异步执行2个耗时操作，然后当2个耗时操作都执行完毕后再回到主线程执行操作。</p>
<pre><code>-(void)testGroupQueue
{
        NSLog(@&quot;用户想要登录&quot;);

        dispatch_group_t group = dispatch_group_create();

        dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
            sleep(1);
            NSLog(@&quot;填写账号完成&quot;);
        });
        dispatch_group_async(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
            sleep(1);
            NSLog(@&quot;填写密码完成&quot;);
        });

        dispatch_group_notify(group, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
            NSLog(@&quot;用户可以登录了&quot;);
        });
}

2016-02-26 13:22:09.973 FL_GCD_DEMO[5494:3812823] 用户想要登录
2016-02-26 13:22:10.978 FL_GCD_DEMO[5494:3812859] 填写密码完成
2016-02-26 13:22:10.978 FL_GCD_DEMO[5494:3812860] 填写账号完成
2016-02-26 13:22:10.978 FL_GCD_DEMO[5494:3812860] 用户可以登录了
</code></pre><h1 id="Suspend和Resume"><a href="#Suspend和Resume" class="headerlink" title="Suspend和Resume"></a>Suspend和Resume</h1><p>有时可能需要我们中断某些操作，还需要我们恢复执行，这个时候就可以用到suspend和resume操作.</p>
<p>suspend不会停止当当前正在执行的block,而是中断了后面未执行的，在resume之后再执行后面的block</p>
<pre><code>-(void)testSuspendAndResume
{
    dispatch_queue_t queue = dispatch_queue_create(&quot;myqueue&quot;, DISPATCH_QUEUE_SERIAL);
    NSLog(@&quot;start&quot;);
    dispatch_async(queue, ^{
        [NSThread sleepForTimeInterval:5];
        NSLog(@&quot;1&quot;);
    });
    dispatch_async(queue, ^{
        [NSThread sleepForTimeInterval:5];
        NSLog(@&quot;2&quot;);
    });

    [NSThread sleepForTimeInterval:3];
    NSLog(@&quot;suspend&quot;);
    dispatch_suspend(queue);
    [NSThread sleepForTimeInterval:5];
    NSLog(@&quot;resume&quot;);
    dispatch_resume(queue);
}

2016-02-25 22:01:02.475 FL_GCD_DEMO[4890:3722720] start
2016-02-25 22:01:05.476 FL_GCD_DEMO[4890:3722720] suspend
2016-02-25 22:01:07.479 FL_GCD_DEMO[4890:3722759] 1
2016-02-25 22:01:10.478 FL_GCD_DEMO[4890:3722720] resume
2016-02-25 22:01:15.478 FL_GCD_DEMO[4890:3722759] 2
</code></pre><h1 id="dispatch-semaphore"><a href="#dispatch-semaphore" class="headerlink" title="dispatch_semaphore"></a>dispatch_semaphore</h1><pre><code>-(void)testSemaphore
{
    dispatch_semaphore_t semaphore = dispatch_semaphore_create(2);
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    for (int i = 0; i &lt;10; i++)
    {
        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
        dispatch_async(queue, ^{
            NSLog(@&quot;下载资源：%i&quot;,i);
            sleep(2);
            dispatch_semaphore_signal(semaphore);
        });
    }
}

2016-02-26 14:04:33.392 FL_GCD_DEMO[5713:3848434] 下载资源：1
2016-02-26 14:04:33.392 FL_GCD_DEMO[5713:3848431] 下载资源：0
2016-02-26 14:04:35.397 FL_GCD_DEMO[5713:3848434] 下载资源：2
2016-02-26 14:04:35.397 FL_GCD_DEMO[5713:3848431] 下载资源：3
2016-02-26 14:04:37.400 FL_GCD_DEMO[5713:3848434] 下载资源：5
2016-02-26 14:04:37.400 FL_GCD_DEMO[5713:3848431] 下载资源：4
2016-02-26 14:04:39.401 FL_GCD_DEMO[5713:3848431] 下载资源：6
2016-02-26 14:04:39.401 FL_GCD_DEMO[5713:3848434] 下载资源：7
2016-02-26 14:04:41.406 FL_GCD_DEMO[5713:3848434] 下载资源：9
2016-02-26 14:04:41.406 FL_GCD_DEMO[5713:3848431] 下载资源：8
</code></pre><p>说明:dispatch_semaphore_create(2)创建了一个单位为2的信号量<br>dispatch_semaphore_wait()会消耗一个单位<br>ispatch_semaphore_signal()会增加一个单位<br>而dispatch_semaphore_create(2)中传入的“2”决定了这个信号量最多包含2个单位。<br>dispatch_semaphore_wait()中的参数2DISPATCH_TIME_FOREVER表示当信号量单位变为0个，则使得代码的执行停止在当前位置不再继续下去，直到收到signal使得单位大于0，才继续往下执行。<br>在上述代码中，每执行一次下载会占用一个单位，下载完成后通过signal告诉wait可以继续向下执行代码，从而控制同时进行的下载数量。</p>
<h1 id="GCD-in-Swift-3"><a href="#GCD-in-Swift-3" class="headerlink" title="GCD in Swift 3"></a>GCD in Swift 3</h1><h2 id="获取全局队列"><a href="#获取全局队列" class="headerlink" title="获取全局队列"></a>获取全局队列</h2><pre><code>DispatchQueue.global(qos: DispatchQoS.*)

DispatchQueue.global(qos: .userInitiated).async {
print(&quot;user initiated task&quot;)
}

DISPATCH_QUEUE_PRIORITY_HIGH    .userInitiated
DISPATCH_QUEUE_PRIORITY_DEFAULT    .default
DISPATCH_QUEUE_PRIORITY_LOW    .utility
DISPATCH_QUEUE_PRIORITY_BACKGROUND    .background
</code></pre><h2 id="创建队列"><a href="#创建队列" class="headerlink" title="创建队列"></a>创建队列</h2><pre><code>let queue = DispatchQueue(label: &quot;Kenneth&quot;)

let conQueue = DispatchQueue(label: &quot;Kenneth&quot;, attributes: .concurrent)

let backgroundQueue = DispatchQueue(label: &quot;com.app.queue&quot;,
                                qos: .background, 
                                target: nil)
</code></pre><h2 id="同步任务"><a href="#同步任务" class="headerlink" title="同步任务"></a>同步任务</h2><pre><code>let queue = DispatchQueue(label: &quot;Kenneth&quot;)
queue.sync {
    print(&quot;Hello World&quot;)
}
</code></pre><h2 id="异步任务"><a href="#异步任务" class="headerlink" title="异步任务"></a>异步任务</h2><pre><code>let queue = DispatchQueue(label: &quot;Kenneth&quot;)
queue.async {
    print(&quot;Hello World&quot;)
}
</code></pre><h2 id="全局队列异步"><a href="#全局队列异步" class="headerlink" title="全局队列异步"></a>全局队列异步</h2><pre><code>DispatchQueue.global().async {
    //Something that wastes time
    DispatchQueue.main.async {
    //返回主线程
    }
}
</code></pre><h2 id="延时操作"><a href="#延时操作" class="headerlink" title="延时操作"></a>延时操作</h2><p>注意这里的单位是秒</p>
<pre><code>DispatchQueue.main.asyncAfter(deadline: DispatchTime.now() + 3.5) {
    // 你想做啥
}
</code></pre><h2 id="dispatch-once"><a href="#dispatch-once" class="headerlink" title="dispatch_once"></a>dispatch_once</h2><p>dispatch_once 在 OC 时代是一个用来写单例的很好的工具，它保证任务只执行一次。然而在 Swift 3 中，这个函数被删除了。<br>在 Swift 中，好用又简洁的单例请使用 static let。</p>
<h2 id="DispatchWorkItem"><a href="#DispatchWorkItem" class="headerlink" title="DispatchWorkItem"></a>DispatchWorkItem</h2><p>除了直接使用 Global Queue， 还可以定义 DispatchWorkItem。 DispatchWorkItem 定义了一个操作的内部代码，以及优先级，特性等等。 它可以直接在任何队列中执行：</p>
<pre><code>let queue = DispatchQueue(label: &quot;swift.queue&quot;)
let workItem = DispatchWorkItem(qos: .userInitiated, flags: .assignCurrentContext) { 

}
queue.async(execute: workItem)
</code></pre><p>You can also use same block of code many times by wrapping it in DispatchWorkItem instance and passing it to DispatchQueue</p>
<pre><code>let block = DispatchWorkItem {
    print(&quot;do something&quot;)
}
DispatchQueue.main.async(execute: block)
</code></pre><ol>
<li><a href="http://www.jianshu.com/p/2d57c72016c6" target="_blank" rel="external">iOS多线程–彻底学会多线程之GCD</a></li>
<li><a href="http://www.jianshu.com/p/5efa458c9340" target="_blank" rel="external">GCD（Grand Central Dispatch）快速上手</a></li>
<li><a href="http://www.jianshu.com/p/7efbecee6af8" target="_blank" rel="external">GCD in Swift 3</a></li>
<li><a href="http://www.jianshu.com/p/66eb7e2a8b0f" target="_blank" rel="external">GCD for Swift</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/28/Grand-Central-Dispatch/" itemprop="url">
                  Grand_Central_Dispatch
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-28T17:02:59+10:00" content="2016-09-28">
              2016-09-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IT/" itemprop="url" rel="index">
                    <span itemprop="name">IT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/28/Grand-Central-Dispatch/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/28/Grand-Central-Dispatch/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Closure"><a href="#Closure" class="headerlink" title="Closure"></a>Closure</h1><h2 id="Closure-is-a-first-class-citizen-of-the-language"><a href="#Closure-is-a-first-class-citizen-of-the-language" class="headerlink" title="Closure is a first class citizen of the language"></a>Closure is a first class citizen of the language</h2><ul>
<li>assign them to variables or constants,</li>
<li>put then inside arrays or dictionaries</li>
<li>return them as the result of a function or closure</li>
<li>and even receive them as parameters of another function or closure!</li>
</ul>
<pre><code>let f = { (x:Int) -&gt; Int in
    return x + 42
}

f(89)

let closures = [
    f,                                  // our previous closure
    {(x:Int) -&gt; Int in return x * 2},   // a new Int -&gt; Int closure
    {x in return x - 8},                // no need for the type of the closure!
    {(x:Int) in x * x},                 // no need for return if only one line
    {$0 * 42}                           // access parameter by position instead of name
]

for fn in closures {
fn(42)
}
</code></pre><h2 id="Functions-and-closures-are-the-same-thing"><a href="#Functions-and-closures-are-the-same-thing" class="headerlink" title="Functions and closures are the same thing"></a>Functions and closures are the same thing</h2><p>Actually, when the compiler finds a function declaration such as foo, it will take the following steps:</p>
<ul>
<li>Create a closure that takes an Int and returns 42 plus that Int.</li>
<li>Then, assigns this closure to a constant called foo</li>
</ul>
<pre><code>func foo(x:Int) -&gt; Int {
    return 42 + x
}

let bar = { (x: Int) -&gt; Int in
    return 42 + x
}
</code></pre><p>add a few functions to an array and then call them</p>
<pre><code>func larry(x:Int) -&gt; Int {
    return x * x
}

func curly(n:Int) -&gt; Int {
    return n * (n - 1)
}

func moe(n:Int) -&gt; Int {
    return n * (n - 1) * (n - 2)
}

var stooges = [larry, curly, moe]

for stooge in stooges {
    stooge(42)
}

stooges.append(bar)
for each in stooges {
    each(42)
}
</code></pre><h2 id="Typealias-amp-Capture-value"><a href="#Typealias-amp-Capture-value" class="headerlink" title="Typealias &amp; Capture value"></a>Typealias &amp; Capture value</h2><pre><code>typealias IntMaker = (Void) -&gt; Int
</code></pre><p>Functions and closure capture variables defined before the closure or function is defined.</p>
<pre><code>func makeCounter() -&gt; IntMaker {
    var n = 0

    // Functions within functions?
    // Yes we can!
    func adder() -&gt; Integer {
        n = n + 1
        return n
    }
    return adder
}

let counter1 = makeCounter()
let counter2 = makeCounter()

counter1() //1
counter1() //2
counter1() //3
</code></pre><p>each closure has its own copy of the environment (the values of all variables that were captured).</p>
<pre><code>counter2() //1
</code></pre><h1 id="GCD"><a href="#GCD" class="headerlink" title="GCD"></a>GCD</h1><h2 id="Hiding-threads"><a href="#Hiding-threads" class="headerlink" title="Hiding threads"></a>Hiding threads</h2><ul>
<li><p>Threads are inherently complex and dangerous</p>
</li>
<li><p>GCD makes asynchronous programming easier and safer by hiding threads within the concept of a queue of closure from the developer</p>
</li>
<li><p>Blades are inherently dangerous ,add handles to make for safer knives</p>
</li>
</ul>
<h2 id="Types-of-queues"><a href="#Types-of-queues" class="headerlink" title="Types of queues"></a>Types of queues</h2><h3 id="Serial-or-synchronous-queue-predictable"><a href="#Serial-or-synchronous-queue-predictable" class="headerlink" title="Serial or synchronous queue - predictable"></a>Serial or synchronous queue - predictable</h3><ul>
<li><p>Every closure gets to run when it reaches the end of the queue</p>
</li>
<li><p>The order in which closures run is predictable</p>
</li>
<li><p>Still have concurrency ,each queue will run on its own threads and will not block each other</p>
</li>
</ul>
<h3 id="Concurrent-or-Asynchronous-queue-unpredictable"><a href="#Concurrent-or-Asynchronous-queue-unpredictable" class="headerlink" title="Concurrent or Asynchronous queue - unpredictable"></a>Concurrent or Asynchronous queue - unpredictable</h3><ul>
<li><p>Have several threads pickup closures at any point of the queue for running</p>
</li>
<li><p>The order in which closures run is not predictable</p>
</li>
</ul>
<h3 id="Main-queue"><a href="#Main-queue" class="headerlink" title="Main queue"></a>Main queue</h3><ul>
<li><p>handles the UI of your app</p>
</li>
<li><p>You should never run code that blocks on this queue</p>
</li>
</ul>
<h2 id="Main-function-in-GCD"><a href="#Main-function-in-GCD" class="headerlink" title="Main function in GCD"></a>Main function in GCD</h2><h3 id="create-a-queue"><a href="#create-a-queue" class="headerlink" title="create a queue"></a>create a queue</h3><p>Represents a queue</p>
<pre><code>dispatch_queue_t
</code></pre><p>Ceate a queue from scratch,To specify serial, just pass dispatch_queue_serial or nil</p>
<pre><code>dispatch_queue_create(name,serial/concurrent)
</code></pre><h3 id="Global-queues"><a href="#Global-queues" class="headerlink" title="Global queues"></a>Global queues</h3><p>Use existing one queue instead of creating new queues</p>
<pre><code>QOS_CLASS_USER_INTERACTIVE //top priority 

QOS_CLASS_USER_INITIATED   //regular priority 

QOS_CLASS_BACKGROUND    //low

QOS_CLASS_UTILITY //lowes 
</code></pre><p>access those global queues with function </p>
<pre><code>dispatch_get_global_queue
</code></pre><h3 id="Main-queue-1"><a href="#Main-queue-1" class="headerlink" title="Main queue"></a>Main queue</h3><p>get the main queue</p>
<pre><code>dispatch_get_main_queue()
</code></pre><h3 id="Add-a-closure-to-a-queue"><a href="#Add-a-closure-to-a-queue" class="headerlink" title="Add a closure to a queue"></a>Add a closure to a queue</h3><ul>
<li>the code inside the queue will run sometime in the immediate future</li>
<li>the exact time will depend on how many closures already waiting in the queue and the priority of the queue </li>
<li>dispatch_async adds your closures to each queue and return imediately</li>
</ul>
<p>Add a closure to a queue</p>
<pre><code>dispatch_async ()
</code></pre><p>Example 1</p>
<pre><code>let q = dispatch_get_global_queue(QOS_CLASS_USER_INTERACTIVE,0)

//Imediately return and add the block to the q ,then run in the near future 
dispatch_async(q){
    () -&gt; Void in
    print(&quot;tic&quot;)
}

print (&quot;tac&quot;) //this run first
</code></pre><p>Example 2</p>
<pre><code>//cannot predict order the code run below of each queue

let q1 = dispatch_queue_create(&quot;queue1&quot;,nil)
let q2 = dispatch_queue_create(&quot;queue1&quot;,nil)
let q3 = dispatch_queue_create(&quot;queue1&quot;,nil)

dispatch_async(q1){ ()-&gt;Void in
print(1)
}

dispatch_async(q2){ ()-&gt;Void in
print(2)
}

dispatch_async(q3){ ()-&gt;Void in
print(3)
}

print(&quot;end&quot;) //run first
</code></pre><h3 id="UIKIT-amp-CoreData"><a href="#UIKIT-amp-CoreData" class="headerlink" title="UIKIT &amp; CoreData"></a>UIKIT &amp; CoreData</h3><ul>
<li><p>when the framework can run in the background it is said to be thread safe </p>
</li>
<li><p>cannot run anything from UIKit in the background</p>
</li>
</ul>
<pre><code>//maybe crash , uikit should run in Main queue

let downloadQueue = dispatch_queue_create(&quot;download&quot;,nil)

dispatch_async(downloadQueue){()-&gt; Void in 

let imgData = NSData (contentsOfURL:url!)

let image = UIImage(data:imgData!)

self.photoViewimage = image

}
</code></pre><h2 id="Synchronous-download"><a href="#Synchronous-download" class="headerlink" title="Synchronous download"></a>Synchronous download</h2><pre><code>// Get the URL for the image
let url = NSURL(string: BigImages.seaLion.rawValue)

// Obtain the NSData with the image
let imgData = NSData(contentsOfURL: url!)

// Turn it into a UIImage
let image = UIImage(data: imgData!)

// Display it
photoView.image = image
</code></pre><p>Refactor code by if-let </p>
<pre><code>if let url = NSURL(string: BigImages.seaLion.rawValue),
    let imgData = NSData(contentsOfURL: url),
    let image = UIImage(data: imgData){

    // Display it
    photoView.image = image
}
</code></pre><h2 id="Asynchronous-download"><a href="#Asynchronous-download" class="headerlink" title="Asynchronous download"></a>Asynchronous download</h2><p>Not all of UIkit is thread and save.There are a few exceptions, such as UIImage<br>All the visual stuff, the views are unsaved<br>if name end view, it must be main queue </p>
<pre><code>@IBAction func simpleAsynchronousDownload(sender: UIBarButtonItem) {

        let url = NSURL(string: BigImages.shark.rawValue)

        // create a queue
        let downloadQueue = dispatch_queue_create(&quot;download&quot;, nil)

        // add a closure that encapsulates the blocking operation
        // run it asynchronously: some time in the near future

        dispatch_async(downloadQueue) { () -&gt; Void in

            // Obtain the NSData with the image
            let imgData = NSData(contentsOfURL: url!)

            // Turn it into a UIImage
            let image = UIImage(data: imgData!)

            // Run the code that updates the UI in the main queue!
            dispatch_async(dispatch_get_main_queue(), { () -&gt; Void in
                // Display it
                self.photoView.image = image
            })
        }
    }
</code></pre><h2 id="Completion-Closure"><a href="#Completion-Closure" class="headerlink" title="Completion Closure"></a>Completion Closure</h2><p>It is a good practice to make sure that always all your completion handlers run in the main queue</p>
<pre><code>    func withBigImage(completionHandler handler: (image: UIImage) -&gt; Void){

    dispatch_async(dispatch_get_global_queue(QOS_CLASS_USER_INITIATED, 0)) { () -&gt; Void in

        // get the url
        // get the NSData
        // turn it into a UIImage

        if let url = NSURL(string: BigImages.whale.rawValue), let imgData = NSData(contentsOfURL: url), let img = UIImage(data: imgData) {

            // run the completion block
            // always in the main queue, just in case!

            dispatch_async(dispatch_get_main_queue(), { () -&gt; Void in
                handler(image: img)
            })
        }
    }
}
</code></pre><h2 id="Async-amp-Sync"><a href="#Async-amp-Sync" class="headerlink" title="Async &amp; Sync"></a>Async &amp; Sync</h2><p>doesn’t wait for the closure to finish ,and moves on Always use until you know very well what you are doing</p>
<pre><code>dispatch_async()
</code></pre><p>won’t return immediately.waits until the closure is done ,could easily get stalled!</p>
<pre><code>dispatch_sync()
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/28/Grand-Central-Dispatch-Tutorial-for-Swift1/" itemprop="url">
                  Grand_Central_Dispatch_Tutorial_for_Swift1
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-28T15:34:43+10:00" content="2016-09-28">
              2016-09-28
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/28/Grand-Central-Dispatch-Tutorial-for-Swift1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/28/Grand-Central-Dispatch-Tutorial-for-Swift1/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Term"><a href="#Term" class="headerlink" title="Term"></a>Term</h1><p>GCD is the marketing name for libdispatch</p>
<h2 id="Serial-vs-Concurrent"><a href="#Serial-vs-Concurrent" class="headerlink" title="Serial vs. Concurrent"></a>Serial vs. Concurrent</h2><p>These terms describe when tasks are executed with respect to each other.</p>
<p>Tasks executed serially are always executed one at a time.</p>
<p>Tasks executed concurrently might be executed at the same time.</p>
<h2 id="Synchronous-vs-Asynchronous-同步和异步"><a href="#Synchronous-vs-Asynchronous-同步和异步" class="headerlink" title="Synchronous vs. Asynchronous(同步和异步)"></a>Synchronous vs. Asynchronous(同步和异步)</h2><p>These terms describe when a function will return control to the caller, and how much work will have been done by that point.</p>
<p>A synchronous function returns only after the completion of a task that it orders.</p>
<p>An asynchronous function, on the other hand, returns immediately, ordering the task to be done but not waiting for it. Thus, an asynchronous function does not block the current thread of execution from proceeding on to the next function.</p>
<h2 id="Critical-Section"><a href="#Critical-Section" class="headerlink" title="Critical Section"></a>Critical Section</h2><p>This is a piece of code that must not be executed concurrently, which might manipulates a shared resource</p>
<h2 id="Race-Condition"><a href="#Race-Condition" class="headerlink" title="Race Condition"></a>Race Condition</h2><h2 id="Deadlock"><a href="#Deadlock" class="headerlink" title="Deadlock"></a>Deadlock</h2><p>两个thread互相等待对方完成，陷入僵局</p>
<h2 id="Thread-Safe"><a href="#Thread-Safe" class="headerlink" title="Thread Safe"></a>Thread Safe</h2><p>Thread safe code can be safely called from multiple threads or concurrent tasks without causing any problems</p>
<p>设定常量是线程安全的，变量不一定安全，因为可能被其他线程的所改变值</p>
<p>Variables and data structures that are mutable and not inherently thread-safe should only be accessed from one thread at a time.</p>
<h2 id="Context-Switch"><a href="#Context-Switch" class="headerlink" title="Context Switch"></a>Context Switch</h2><p>A context switch is the process of storing and restoring execution state when you switch between executing different threads on a single process.</p>
<h2 id="Concurrency-vs-Parallelism"><a href="#Concurrency-vs-Parallelism" class="headerlink" title="Concurrency vs Parallelism"></a>Concurrency vs Parallelism</h2><p>Multi-core devices execute multiple threads at the same time via parallelism</p>
<p>Single-cored devices must run a thread, perform a context switch</p>
<p>Parallelism requires concurrency, but concurrency does not guarantee parallelism.</p>
<h1 id="Queues"><a href="#Queues" class="headerlink" title="Queues"></a>Queues</h1><p>GCD provides dispatch queues to handle submitted tasks; these queues manage the tasks you provide to GCD and execute those tasks in FIFO order</p>
<h2 id="Serial-Queues"><a href="#Serial-Queues" class="headerlink" title="Serial Queues"></a>Serial Queues</h2><p>executes only one task at a time</p>
<p><img src="https://www.dropbox.com/s/3ghgkn5eg52vd0t/2016092801.png?dl=1" alt="1"></p>
<h2 id="Concurrent-Queues"><a href="#Concurrent-Queues" class="headerlink" title="Concurrent Queues"></a>Concurrent Queues</h2><p>The decision of when to start a task is entirely up to GCD.</p>
<p><img src="https://www.dropbox.com/s/ivkbyp2306tqry4/2016092802.png?dl=1" alt="2"></p>
<h2 id="Queue-Types"><a href="#Queue-Types" class="headerlink" title="Queue Types"></a>Queue Types</h2><p>You have at least five queues at your disposal: the main queue, four global dispatch queues, plus any custom queues</p>
<ul>
<li><p>Main queue:which is the only thread allowed to update your UI.</p>
</li>
<li><p>QOS_CLASS_USER_INTERACTIVE</p>
</li>
<li><p>QOS_CLASS_USER_INITIATED</p>
</li>
<li><p>QOS_CLASS_UTILITY</p>
</li>
<li><p>QOS_CLASS_BACKGROUND</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/26/The-Swift-Programming-Language-Swift3/" itemprop="url">
                  The-Swift-Programming-Language-Swift3
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-26T11:56:08+10:00" content="2016-09-26">
              2016-09-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IT/" itemprop="url" rel="index">
                    <span itemprop="name">IT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/26/The-Swift-Programming-Language-Swift3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/26/The-Swift-Programming-Language-Swift3/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="A-Swift-Tour"><a href="#A-Swift-Tour" class="headerlink" title="A Swift Tour"></a>A Swift Tour</h1><h2 id="Simple-Values"><a href="#Simple-Values" class="headerlink" title="Simple Values??"></a>Simple Values??</h2><h3 id="Explictly-convert-value"><a href="#Explictly-convert-value" class="headerlink" title="Explictly convert value"></a>Explictly convert value</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> label = <span class="string">"The width is "</span></span><br><span class="line"><span class="keyword">let</span> width = <span class="number">94</span></span><br><span class="line"><span class="keyword">let</span> widthLabel = label + <span class="type">String</span>(width)</span><br></pre></td></tr></table></figure>
<h3 id="Include-value-in-String"><a href="#Include-value-in-String" class="headerlink" title="Include value in String"></a>Include value in String</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> apples = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> oranges = <span class="number">5</span></span><br><span class="line"><span class="keyword">let</span> appleSummary = <span class="string">"I have <span class="subst">\(apples)</span> apples."</span></span><br><span class="line"><span class="keyword">let</span> fruitSummary = <span class="string">"I have <span class="subst">\(apples + oranges)</span> pieces of fruit.</span></span><br></pre></td></tr></table></figure>
<h3 id="Create-Array"><a href="#Create-Array" class="headerlink" title="Create Array"></a>Create Array</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shoppingList = [<span class="string">"catfish"</span>, <span class="string">"water"</span>, <span class="string">"tulips"</span>, <span class="string">"blue paint"</span>]</span><br><span class="line">shoppingList[<span class="number">1</span>] = <span class="string">"bottle of water"</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">//A comma is allowed after the last element.</span></span><br><span class="line"><span class="keyword">var</span> occupations = [</span><br><span class="line">    <span class="string">"Malcolm"</span>: <span class="string">"Captain"</span>,</span><br><span class="line">    <span class="string">"Kaylee"</span>: <span class="string">"Mechanic"</span>,</span><br><span class="line">]</span><br><span class="line">occupations[<span class="string">"Jayne"</span>] = <span class="string">"Public Relations</span></span><br></pre></td></tr></table></figure>
<h3 id="Create-Empty-Array"><a href="#Create-Empty-Array" class="headerlink" title="Create Empty Array"></a>Create Empty Array</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> emptyArray = [<span class="type">String</span>]()</span><br><span class="line"><span class="keyword">let</span> emptyDictionary = [<span class="type">String</span>: <span class="type">Float</span>]()</span><br><span class="line"></span><br><span class="line"><span class="comment">//If type information can be inferred</span></span><br><span class="line">shoppingList = []</span><br><span class="line">occupations = [:]</span><br></pre></td></tr></table></figure>
<h2 id="Control-Flow"><a href="#Control-Flow" class="headerlink" title="Control Flow"></a>Control Flow</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> individualScores = [<span class="number">75</span>, <span class="number">43</span>, <span class="number">103</span>, <span class="number">87</span>, <span class="number">12</span>]</span><br><span class="line"><span class="keyword">var</span> teamScore = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> score <span class="keyword">in</span> individualScores &#123;</span><br><span class="line">    <span class="keyword">if</span> score &gt; <span class="number">50</span> &#123;</span><br><span class="line">        teamScore += <span class="number">3</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        teamScore += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(teamScore)</span><br></pre></td></tr></table></figure>
<h3 id="If-let-for-unwrapping-optional-value-safely"><a href="#If-let-for-unwrapping-optional-value-safely" class="headerlink" title="If-let for unwrapping optional value safely"></a>If-let for unwrapping optional value safely</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> optionalString: <span class="type">String</span>? = <span class="string">"Hello"</span></span><br><span class="line"><span class="built_in">print</span>(optionalString == <span class="literal">nil</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> optionalName: <span class="type">String</span>? = <span class="string">"John Appleseed"</span></span><br><span class="line"><span class="keyword">var</span> greeting = <span class="string">"Hello!"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> name = optionalName &#123;</span><br><span class="line">    greeting = <span class="string">"Hello, <span class="subst">\(name)</span>"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="to-adopt-alternative-value-if-optional-value-nil"><a href="#to-adopt-alternative-value-if-optional-value-nil" class="headerlink" title="??  to adopt alternative value if optional value nil"></a>??  to adopt alternative value if optional value nil</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> nickName: <span class="type">String</span>? = <span class="literal">nil</span></span><br><span class="line"><span class="keyword">let</span> fullName: <span class="type">String</span> = <span class="string">"John Appleseed"</span></span><br><span class="line"><span class="keyword">let</span> informalGreeting = <span class="string">"Hi <span class="subst">\(nickName ?? fullName)</span>"</span></span><br></pre></td></tr></table></figure>
<h3 id="Multiple-comparison-operations"><a href="#Multiple-comparison-operations" class="headerlink" title="Multiple comparison operations"></a>Multiple comparison operations</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vegetable = <span class="string">"red pepper"</span></span><br><span class="line"><span class="keyword">switch</span> vegetable &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">"celery"</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Add some raisins and make ants on a log."</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="string">"cucumber"</span>, <span class="string">"watercress"</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"That would make a good tea sandwich."</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> x <span class="keyword">where</span> x.hasSuffix(<span class="string">"pepper"</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Is it a spicy <span class="subst">\(x)</span>?"</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Everything tastes good in soup."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="For-in-iterate-over-items-in-a-dictionary"><a href="#For-in-iterate-over-items-in-a-dictionary" class="headerlink" title="For-in  iterate over items in a dictionary"></a>For-in  iterate over items in a dictionary</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> interestingNumbers = [</span><br><span class="line">    <span class="string">"Prime"</span>: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>],</span><br><span class="line">    <span class="string">"Fibonacci"</span>: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>],</span><br><span class="line">    <span class="string">"Square"</span>: [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>],</span><br><span class="line">]</span><br><span class="line"><span class="keyword">var</span> largest = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> (kind, numbers) <span class="keyword">in</span> interestingNumbers &#123;</span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">        <span class="keyword">if</span> number &gt; largest &#123;</span><br><span class="line">            largest = number</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(largest)</span><br></pre></td></tr></table></figure>
<h3 id="While-to-repeat-a-block-of-code"><a href="#While-to-repeat-a-block-of-code" class="headerlink" title="While to repeat a block of code"></a>While to repeat a block of code</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Use while to repeat a block of code until a condition changes</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> n = <span class="number">2</span></span><br><span class="line"><span class="keyword">while</span> n &lt; <span class="number">100</span> &#123;</span><br><span class="line">    n = n * <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(n)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> m = <span class="number">2</span></span><br><span class="line"><span class="keyword">repeat</span> &#123;</span><br><span class="line">    m = m * <span class="number">2</span></span><br><span class="line">&#125; <span class="keyword">while</span> m &lt; <span class="number">100</span></span><br><span class="line"><span class="comment">//The condition of a loop can be at the end instead, ensuring that the loop is run at least once.</span></span><br><span class="line"><span class="built_in">print</span>(m)</span><br></pre></td></tr></table></figure>
<h3 id="For-loop-with-indexes"><a href="#For-loop-with-indexes" class="headerlink" title="For loop with indexes"></a>For loop with indexes</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> total = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="number">4</span> &#123;</span><br><span class="line">    total += i</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(total)</span><br><span class="line"></span><br><span class="line"><span class="comment">//use ... to make a range that includes both values</span></span><br></pre></td></tr></table></figure>
<h2 id="Functions-and-Closures"><a href="#Functions-and-Closures" class="headerlink" title="Functions and Closures"></a>Functions and Closures</h2><h3 id="Regular-Format"><a href="#Regular-Format" class="headerlink" title="Regular Format"></a>Regular Format</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greet</span><span class="params">(person: String, day: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello <span class="subst">\(person)</span>, today is <span class="subst">\(day)</span>."</span></span><br><span class="line">&#125;</span><br><span class="line">greet(person: <span class="string">"Bob"</span>, day: <span class="string">"Tuesday"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Custom-argument-label-or-no-label"><a href="#Custom-argument-label-or-no-label" class="headerlink" title="Custom argument label or no label"></a>Custom argument label or no label</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Write a custom argument label before the parameter name, or write _ to use no argument label.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greet</span><span class="params">(<span class="number">_</span> person: String, on day: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello <span class="subst">\(person)</span>, today is <span class="subst">\(day)</span>."</span></span><br><span class="line">&#125;</span><br><span class="line">greet(<span class="string">"John"</span>, on: <span class="string">"Wednesday"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Return-multiple-values-from-a-function"><a href="#Return-multiple-values-from-a-function" class="headerlink" title="Return multiple values from a function"></a>Return multiple values from a function</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calculateStatistics</span><span class="params">(scores: [Int])</span></span> -&gt; (<span class="built_in">min</span>: <span class="type">Int</span>, <span class="built_in">max</span>: <span class="type">Int</span>, sum: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">min</span> = scores[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">max</span> = scores[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> score <span class="keyword">in</span> scores &#123;</span><br><span class="line">        <span class="keyword">if</span> score &gt; <span class="built_in">max</span> &#123;</span><br><span class="line">            <span class="built_in">max</span> = score</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> score &lt; <span class="built_in">min</span> &#123;</span><br><span class="line">            <span class="built_in">min</span> = score</span><br><span class="line">        &#125;</span><br><span class="line">        sum += score</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">min</span>, <span class="built_in">max</span>, sum)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> statistics = calculateStatistics(scores: [<span class="number">5</span>, <span class="number">3</span>, <span class="number">100</span>, <span class="number">3</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// tuple can be referred to either by name or by number.</span></span><br><span class="line"><span class="built_in">print</span>(statistics.sum)</span><br><span class="line"><span class="built_in">print</span>(statistics.<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Functionsw-with-multiple-arguments"><a href="#Functionsw-with-multiple-arguments" class="headerlink" title="Functionsw with multiple arguments"></a>Functionsw with multiple arguments</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//collecting them into an array.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sumOf</span><span class="params">(numbers: Int...)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">        sum += number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line">sumOf()</span><br><span class="line">sumOf(numbers: <span class="number">42</span>, <span class="number">597</span>, <span class="number">12</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Nested-Functions"><a href="#Nested-Functions" class="headerlink" title="Nested Functions"></a>Nested Functions</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//儿子能享受妈妈的资源</span></span><br><span class="line"><span class="comment">// Nested functions have access to variables that were declared in the outer function</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">returnFifteen</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">10</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">()</span></span> &#123;</span><br><span class="line">        y += <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">    add()</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br><span class="line">returnFifteen()</span><br></pre></td></tr></table></figure>
<h3 id="Function-as-its-value"><a href="#Function-as-its-value" class="headerlink" title="Function as its value"></a>Function as its value</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeIncrementer</span><span class="params">()</span></span> -&gt; ((<span class="type">Int</span>) -&gt; <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">addOne</span><span class="params">(number: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> addOne</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> increment = makeIncrementer()</span><br><span class="line">increment(<span class="number">7</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Function-as-one-of-its-arguments"><a href="#Function-as-one-of-its-arguments" class="headerlink" title="Function as one of its arguments."></a>Function as one of its arguments.</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hasAnyMatches</span><span class="params">(list: [Int], condition: <span class="params">(Int)</span></span></span> -&gt; <span class="type">Bool</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> list &#123;</span><br><span class="line">        <span class="keyword">if</span> condition(item) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lessThanTen</span><span class="params">(number: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> number &lt; <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">20</span>, <span class="number">19</span>, <span class="number">7</span>, <span class="number">12</span>]</span><br><span class="line">hasAnyMatches(list: numbers, condition: lessThanTen)</span><br></pre></td></tr></table></figure>
<h3 id="Funtions-closures-Block-of-code"><a href="#Funtions-closures-Block-of-code" class="headerlink" title="Funtions = closures = Block of code"></a>Funtions = closures = Block of code</h3><ol>
<li>The code in a closure has access to things like variables and functions that were available in the scope where the closure was created.</li>
<li>even if the closure is in a different scope when it is executed</li>
<li>Use in to separate the arguments and return type from the body.</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// "in" is used to separate arguments from body.</span></span><br><span class="line"><span class="comment">// use &#123; &#125; without name</span></span><br><span class="line"></span><br><span class="line">numbers.<span class="built_in">map</span>(&#123;</span><br><span class="line">    (number: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">3</span> * number</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="Single-statement-closures"><a href="#Single-statement-closures" class="headerlink" title="Single statement closures"></a>Single statement closures</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// implicitly return the value of their only statement.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mappedNumbers = numbers.<span class="built_in">map</span>(&#123; number <span class="keyword">in</span> <span class="number">3</span> * number &#125;)</span><br><span class="line"><span class="built_in">print</span>(mappedNumbers)</span><br></pre></td></tr></table></figure>
<h3 id="Trailing-closure"><a href="#Trailing-closure" class="headerlink" title="Trailing closure"></a>Trailing closure</h3><ol>
<li>A closure passed as the last argument to a function can appear immediately after the parentheses</li>
<li>When a closure is the only argument to a function, you can omit the parentheses entirely.</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sortedNumbers = numbers.sorted &#123; $<span class="number">0</span> &gt; $<span class="number">1</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(sortedNumbers)</span><br></pre></td></tr></table></figure>
<h2 id="Objects-and-Classes"><a href="#Objects-and-Classes" class="headerlink" title="Objects and Classes"></a>Objects and Classes</h2><h3 id="Regular-fomat"><a href="#Regular-fomat" class="headerlink" title="Regular fomat"></a>Regular fomat</h3><ol>
<li><p><strong>Every property needs a value assigned</strong>—either in its declaration (as with numberOfSides) or in the initializer (as with name).</p>
</li>
<li><p>Use <code>deinit</code> to create a deinitializer if you need to perform some cleanup before the object is deallocated.</p>
<p>​</p>
</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> numberOfSides: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//init method</span></span><br><span class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"A shape with <span class="subst">\(numberOfSides)</span> sides."</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Instance-of-a-class"><a href="#Instance-of-a-class" class="headerlink" title="Instance of a class"></a>Instance of a class</h3><ol>
<li>Create an instance of a class by putting parentheses after the class name.</li>
<li>Use dot syntax to access the properties and methods of the instance.</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shape = <span class="type">Shape</span>()</span><br><span class="line">shape.numberOfSides = <span class="number">7</span></span><br><span class="line"><span class="keyword">var</span> shapeDescription = shape.simpleDescription()</span><br></pre></td></tr></table></figure>
<h3 id="Subclasses"><a href="#Subclasses" class="headerlink" title="Subclasses"></a>Subclasses</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span>: <span class="title">NamedShape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sideLength: <span class="type">Double</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(sideLength: <span class="type">Double</span>, name: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.sideLength = sideLength</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</span><br><span class="line">        numberOfSides = <span class="number">4</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">area</span><span class="params">()</span></span> -&gt;  <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sideLength * sideLength</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"A square with sides of length <span class="subst">\(sideLength)</span>."</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> test = <span class="type">Square</span>(sideLength: <span class="number">5.2</span>, name: <span class="string">"my test square"</span>)</span><br><span class="line">test.area()</span><br><span class="line">test.simpleDescription()</span><br></pre></td></tr></table></figure>
<h3 id="Getter-and-a-setter"><a href="#Getter-and-a-setter" class="headerlink" title="Getter and a setter"></a>Getter and a setter</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EquilateralTriangle</span>: <span class="title">NamedShape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sideLength: <span class="type">Double</span> = <span class="number">0.0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(sideLength: <span class="type">Double</span>, name: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.sideLength = sideLength</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</span><br><span class="line">        numberOfSides = <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> perimeter: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3.0</span> * sideLength</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            </span><br><span class="line">         <span class="comment">//implicit name newValue,You can provide an explicit name in parentheses after set.</span></span><br><span class="line">            sideLength = newValue / <span class="number">3.0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"An equilateral triangle with sides of length <span class="subst">\(sideLength)</span>."</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> triangle = <span class="type">EquilateralTriangle</span>(sideLength: <span class="number">3.1</span>, name: <span class="string">"a triangle"</span>)</span><br><span class="line"><span class="built_in">print</span>(triangle.perimeter)</span><br><span class="line">triangle.perimeter = <span class="number">9.9</span></span><br><span class="line"><span class="built_in">print</span>(triangle.sideLength)</span><br></pre></td></tr></table></figure>
<h3 id="WillSet-and-didSet-confusing…"><a href="#WillSet-and-didSet-confusing…" class="headerlink" title="WillSet and didSet (confusing…)"></a>WillSet and didSet (confusing…)</h3><ol>
<li>run before and after setting a new value</li>
<li>The code you provide is run any time the value changes outside of an initializer</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TriangleAndSquare</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> triangle: <span class="type">EquilateralTriangle</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ensures that the side length of its triangle is always the same as the side length of its square.</span></span><br><span class="line">        </span><br><span class="line">            square.sideLength = newValue.sideLength</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> square: <span class="type">Square</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            triangle.sideLength = newValue.sideLength</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">init</span>(size: <span class="type">Double</span>, name: <span class="type">String</span>) &#123;</span><br><span class="line">        square = <span class="type">Square</span>(sideLength: size, name: name)</span><br><span class="line">        triangle = <span class="type">EquilateralTriangle</span>(sideLength: size, name: name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> triangleAndSquare = <span class="type">TriangleAndSquare</span>(size: <span class="number">10</span>, name: <span class="string">"another test shape"</span>)</span><br><span class="line"><span class="built_in">print</span>(triangleAndSquare.square.sideLength)</span><br><span class="line"><span class="built_in">print</span>(triangleAndSquare.triangle.sideLength)</span><br><span class="line">triangleAndSquare.square = <span class="type">Square</span>(sideLength: <span class="number">50</span>, name: <span class="string">"larger square"</span>)</span><br><span class="line"><span class="built_in">print</span>(triangleAndSquare.triangle.sideLength)</span><br></pre></td></tr></table></figure>
<h3 id="Instance-is-optional-confusing…"><a href="#Instance-is-optional-confusing…" class="headerlink" title="Instance is optional (confusing…)"></a>Instance is optional (confusing…)</h3><ol>
<li>If the value before the ? is nil, everything after the ? is ignored and the value of the whole expression is nil.</li>
<li>Otherwise, the optional value is unwrapped,</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> optionalSquare: <span class="type">Square</span>? = <span class="type">Square</span>(sideLength: <span class="number">2.5</span>, name: <span class="string">"optional square"</span>)</span><br><span class="line"><span class="keyword">let</span> sideLength = optionalSquare?.sideLength</span><br></pre></td></tr></table></figure>
<h2 id="Enumerations-and-Structures"><a href="#Enumerations-and-Structures" class="headerlink" title="Enumerations and Structures"></a>Enumerations and Structures</h2><h3 id="Regular-format"><a href="#Regular-format" class="headerlink" title="Regular format"></a>Regular format</h3><ol>
<li>By default, Swift assigns the raw values starting at zero and incrementing by one each time</li>
<li>Enum.caseValue.rawValue </li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Rank</span>: <span class="title">Int</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> ace = <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> two, three, four, five, six, seven, eight, nine, ten</span><br><span class="line">    <span class="keyword">case</span> jack, queen, king</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .ace:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"ace"</span></span><br><span class="line">        <span class="keyword">case</span> .jack:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"jack"</span></span><br><span class="line">        <span class="keyword">case</span> .queen:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"queen"</span></span><br><span class="line">        <span class="keyword">case</span> .king:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"king"</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="type">String</span>(<span class="keyword">self</span>.rawValue)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> ace = <span class="type">Rank</span>.ace</span><br><span class="line"><span class="keyword">let</span> aceRawValue = ace.rawValue</span><br><span class="line"><span class="keyword">let</span> jackRawValue = <span class="type">Rank</span>.jack.rawValue</span><br></pre></td></tr></table></figure>
<h3 id="Case-value-amp-raw-value"><a href="#Case-value-amp-raw-value" class="headerlink" title="Case value &amp; raw value"></a>Case value &amp; raw value</h3><ol>
<li>You don’t have to provide rawvalue. if you declare one case have raw value ,all the other case will have raw value</li>
<li>Must decalre raw type first before assign rawValue to the case like above</li>
<li>It seems that each case value in Enum look likes an instance of this Enum</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Suit</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> spades, hearts, diamonds, clubs</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .spades:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"spades"</span></span><br><span class="line">        <span class="keyword">case</span> .hearts:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"hearts"</span></span><br><span class="line">        <span class="keyword">case</span> .diamonds:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"diamonds"</span></span><br><span class="line">        <span class="keyword">case</span> .clubs:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"clubs"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">color</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .spades,.clubs:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"black"</span></span><br><span class="line">        <span class="keyword">case</span> .hearts,.diamonds:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"red"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hearts = <span class="type">Suit</span>.hearts</span><br><span class="line"><span class="keyword">let</span> heartsDescription = hearts.simpleDescription()</span><br></pre></td></tr></table></figure>
<h3 id="Enum-instance"><a href="#Enum-instance" class="headerlink" title="Enum instance"></a>Enum instance</h3><ol>
<li>Must be instantiated first , use instance to call this method. </li>
<li>init?(rawValue:) initializer to make an instance of an enumeration from a raw value.</li>
<li>In this way ,can only created limitied number of instances.</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> convertedRank = <span class="type">Rank</span>(rawValue: <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> threeDescription = convertedRank.simpleDescription()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Two-ways-of-Calling-method-in-Enum"><a href="#Two-ways-of-Calling-method-in-Enum" class="headerlink" title="Two ways of Calling method in Enum"></a>Two ways of Calling method in Enum</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.</span></span><br><span class="line"><span class="type">Suit</span>.hearts.simpleDescription()</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.Rank instance maybe nil if pass invalid argument</span></span><br><span class="line"><span class="type">Rank</span>(rawValue: <span class="number">3</span>).simpleDescription()</span><br></pre></td></tr></table></figure>
<h3 id="Associated-value-confusing…"><a href="#Associated-value-confusing…" class="headerlink" title="Associated value (confusing….)"></a>Associated value (confusing….)</h3><p>these values are determined when you make the instance, </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">ServerResponse</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> result(<span class="type">String</span>, <span class="type">String</span>)</span><br><span class="line">    <span class="keyword">case</span> failure(<span class="type">String</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> success = <span class="type">ServerResponse</span>.result(<span class="string">"6:00 am"</span>, <span class="string">"8:09 pm"</span>)</span><br><span class="line"><span class="keyword">let</span> failure = <span class="type">ServerResponse</span>.failure(<span class="string">"Out of cheese."</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">switch</span> success &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .result(sunrise, sunset):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Sunrise is at <span class="subst">\(sunrise)</span> and sunset is at <span class="subst">\(sunset)</span>."</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .failure(message):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Failure...  <span class="subst">\(message)</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Structure-amp-Classes"><a href="#Structure-amp-Classes" class="headerlink" title="Structure &amp; Classes"></a>Structure &amp; Classes</h3><p>structures are always copied when they are passed around in your code, but classes are passed by reference.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Card</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> rank: <span class="type">Rank</span></span><br><span class="line">    <span class="keyword">var</span> suit: <span class="type">Suit</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">simpleDescription</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"The <span class="subst">\(rank.simpleDescription()</span>) of <span class="subst">\(suit.simpleDescription()</span>)"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> threeOfSpades = <span class="type">Card</span>(rank: .three, suit: .spades)</span><br><span class="line"><span class="keyword">let</span> threeOfSpadesDescription = threeOfSpades.simpleDescription()</span><br></pre></td></tr></table></figure>
<h2 id="Protocols-and-Extensions"><a href="#Protocols-and-Extensions" class="headerlink" title="Protocols and Extensions"></a>Protocols and Extensions</h2><h3 id="Protocols"><a href="#Protocols" class="headerlink" title="Protocols"></a>Protocols</h3><p>Classes, enumerations, and structs can all adopt protocols.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ExampleProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> simpleDescription: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">adjust</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleClass</span>: <span class="title">ExampleProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> simpleDescription: <span class="type">String</span> = <span class="string">"A very simple class."</span></span><br><span class="line">    <span class="keyword">var</span> anotherProperty: <span class="type">Int</span> = <span class="number">69105</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">adjust</span><span class="params">()</span></span> &#123;</span><br><span class="line">        simpleDescription += <span class="string">"  Now 100% adjusted."</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="type">SimpleClass</span>()</span><br><span class="line">a.adjust()</span><br><span class="line"><span class="keyword">let</span> aDescription = a.simpleDescription</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SimpleStructure</span>: <span class="title">ExampleProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> simpleDescription: <span class="type">String</span> = <span class="string">"A simple structure"</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">adjust</span><span class="params">()</span></span> &#123;</span><br><span class="line">        simpleDescription += <span class="string">" (adjusted)"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="type">SimpleStructure</span>()</span><br><span class="line">b.adjust()</span><br><span class="line"><span class="keyword">let</span> bDescription = b.simpleDescription</span><br></pre></td></tr></table></figure>
<h3 id="Protocol-can-be-a-type"><a href="#Protocol-can-be-a-type" class="headerlink" title="Protocol can be a type"></a>Protocol can be a type</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> protocolValue: <span class="type">ExampleProtocol</span> = a</span><br><span class="line"><span class="built_in">print</span>(protocolValue.simpleDescription)</span><br><span class="line"><span class="comment">// print(protocolValue.anotherProperty)  // Uncomment to see the error because there is no this method in protocol</span></span><br></pre></td></tr></table></figure>
<h3 id="Mutating-confusing…"><a href="#Mutating-confusing…" class="headerlink" title="Mutating (confusing….)"></a>Mutating (confusing….)</h3><p>Notice the use of the mutating keyword in the declaration of <code>SimpleStructure</code> to mark a method that modifies the structure. The declaration of <code>SimpleClass</code> doesn’t need any of its methods marked as mutating because methods on a class can always modify the class.</p>
<h3 id="Extensions"><a href="#Extensions" class="headerlink" title="Extensions"></a>Extensions</h3><p>add functionality to an existing type</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span>: <span class="title">ExampleProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> simpleDescription: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"The number <span class="subst">\(<span class="keyword">self</span>)</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">adjust</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span> += <span class="number">42</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="number">7</span>.simpleDescription)</span><br></pre></td></tr></table></figure>
<h2 id="Error-Handling"><a href="#Error-Handling" class="headerlink" title="Error Handling"></a>Error Handling</h2><h3 id="Adopts-the-Error-protocol"><a href="#Adopts-the-Error-protocol" class="headerlink" title="Adopts the Error protocol"></a>Adopts the Error protocol</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">PrinterError</span>: <span class="title">Error</span> </span>&#123;</span><br><span class="line"><span class="keyword">case</span> outOfPaper</span><br><span class="line"><span class="keyword">case</span> noToner</span><br><span class="line"><span class="keyword">case</span> onFire</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Throw-amp-Throws"><a href="#Throw-amp-Throws" class="headerlink" title="Throw &amp; Throws"></a>Throw &amp; Throws</h3><p>Use <code>throw</code> to throw an error and <code>throws</code> to mark a function that can throw an error.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">send</span><span class="params">(job: Int, toPrinter printerName: String)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> printerName == <span class="string">"Never Has Toner"</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="type">PrinterError</span>.noToner</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Job sent"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Handle-Error-single-catch"><a href="#Handle-Error-single-catch" class="headerlink" title="Handle Error - single catch"></a>Handle Error - single catch</h3><ol>
<li>Inside the <code>do</code> block, you mark code that can throw an error by writing <code>try</code> in front of it. </li>
<li>Inside the catch block, the error is automatically given the name <code>error</code> unless you give it a different name.</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> printerResponse = <span class="keyword">try</span> send(job: <span class="number">1040</span>, toPrinter: <span class="string">"Bi Sheng"</span>)</span><br><span class="line">    <span class="built_in">print</span>(printerResponse)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Handle-Error-multiple-catch-confusing…"><a href="#Handle-Error-multiple-catch-confusing…" class="headerlink" title="Handle Error - multiple catch (confusing….)"></a>Handle Error - multiple catch (confusing….)</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> printerResponse = <span class="keyword">try</span> send(job: <span class="number">1440</span>, toPrinter: <span class="string">"Gutenberg"</span>)</span><br><span class="line">    <span class="built_in">print</span>(printerResponse)</span><br><span class="line">&#125; <span class="keyword">catch</span> <span class="type">PrinterError</span>.onFire &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"I'll just put this over here, with the rest of the fire."</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> <span class="keyword">let</span> printerError <span class="keyword">as</span> <span class="type">PrinterError</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Printer error: <span class="subst">\(printerError)</span>."</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Handle-Error-try"><a href="#Handle-Error-try" class="headerlink" title="Handle Error - try?"></a>Handle Error - try?</h3><p>If the function throws an error, the specific error is discarded and the result is nil.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> printerSuccess = <span class="keyword">try</span>? send(job: <span class="number">1884</span>, toPrinter: <span class="string">"Mergenthaler"</span>)</span><br><span class="line"><span class="keyword">let</span> printerFailure = <span class="keyword">try</span>? send(job: <span class="number">1885</span>, toPrinter: <span class="string">"Never Has Toner"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Defer"><a href="#Defer" class="headerlink" title="Defer"></a>Defer</h3><ol>
<li>Use defer to write a block of code that is executed after all other code in the function, just before the function returns</li>
<li>The code is executed regardless of whether the function throws an error.</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fridgeIsOpen = <span class="literal">false</span></span><br><span class="line"><span class="keyword">let</span> fridgeContent = [<span class="string">"milk"</span>, <span class="string">"eggs"</span>, <span class="string">"leftovers"</span>]</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fridgeContains</span><span class="params">(<span class="number">_</span> food: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    fridgeIsOpen = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">defer</span> &#123;</span><br><span class="line">        fridgeIsOpen = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> result = fridgeContent.<span class="built_in">contains</span>(food)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">fridgeContains(<span class="string">"banana"</span>)</span><br><span class="line"><span class="built_in">print</span>(fridgeIsOpen)</span><br></pre></td></tr></table></figure>
<h2 id="Generics-confusing…"><a href="#Generics-confusing…" class="headerlink" title="Generics (confusing….)"></a>Generics (confusing….)</h2><h3 id="Regular-foram"><a href="#Regular-foram" class="headerlink" title="Regular foram"></a>Regular foram</h3><p>Write a name inside angle brackets to make a generic function or type.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">makeArray</span>&lt;Item&gt;<span class="params">(repeating item: Item, numberOfTimes: Int)</span></span> -&gt; [<span class="type">Item</span>] &#123;</span><br><span class="line">    <span class="keyword">var</span> result = [<span class="type">Item</span>]()</span><br><span class="line">    <span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;numberOfTimes &#123;</span><br><span class="line">        result.append(item)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line">makeArray(repeating: <span class="string">"knock"</span>, numberOfTimes:<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p>You can make generic forms of functions and methods, as well as classes, enumerations, and structures.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Reimplement the Swift standard library's optional type</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">OptionalValue</span>&lt;<span class="title">Wrapped</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">case</span> some(<span class="type">Wrapped</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> possibleInteger: <span class="type">OptionalValue</span>&lt;<span class="type">Int</span>&gt; = .<span class="keyword">none</span></span><br><span class="line">possibleInteger = .some(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<h3 id="‘where’-to-specify-requirements-confusing…"><a href="#‘where’-to-specify-requirements-confusing…" class="headerlink" title="‘where’  to specify  requirements (confusing….)"></a>‘where’  to specify  requirements (confusing….)</h3><p>Use where right before the body to specify a list of requirements</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">anyCommonElements</span>&lt;T: Sequence, U: Sequence&gt;<span class="params">(<span class="number">_</span> lhs: T, <span class="number">_</span> rhs: U)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">    <span class="keyword">where</span> <span class="type">T</span>.<span class="type">Iterator</span>.<span class="type">Element</span>: <span class="type">Equatable</span>, <span class="type">T</span>.<span class="type">Iterator</span>.<span class="type">Element</span> == <span class="type">U</span>.<span class="type">Iterator</span>.<span class="type">Element</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> lhsItem <span class="keyword">in</span> lhs &#123;</span><br><span class="line">            <span class="keyword">for</span> rhsItem <span class="keyword">in</span> rhs &#123;</span><br><span class="line">                <span class="keyword">if</span> lhsItem == rhsItem &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">anyCommonElements([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<h1 id="The-basics"><a href="#The-basics" class="headerlink" title="The basics"></a>The basics</h1><h2 id="Constants-and-Variables"><a href="#Constants-and-Variables" class="headerlink" title="Constants and Variables"></a>Constants and Variables</h2><h3 id="Declaring-Constants-and-Variables"><a href="#Declaring-Constants-and-Variables" class="headerlink" title="Declaring Constants and Variables"></a>Declaring Constants and Variables</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> maximumNumberOfLoginAttempts = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> currentLoginAttempt = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>declare multiple constants or multiple variables on a single line</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span>, z = <span class="number">0.0</span></span><br></pre></td></tr></table></figure>
<h3 id="Type-Annotations"><a href="#Type-Annotations" class="headerlink" title="Type Annotations"></a>Type Annotations</h3><p>The colon in the declaration means “…of type…” </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> welcomeMessage: <span class="type">String</span></span><br></pre></td></tr></table></figure>
<p>define multiple related variables of the same type on a single line</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> red, green, blue: <span class="type">Double</span></span><br></pre></td></tr></table></figure>
<h3 id="Integer"><a href="#Integer" class="headerlink" title="Integer"></a>Integer</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="Basic-Operators"><a href="#Basic-Operators" class="headerlink" title="Basic Operators"></a>Basic Operators</h1><h2 id="Nil-Coalescing-Operator-a-b"><a href="#Nil-Coalescing-Operator-a-b" class="headerlink" title="Nil-Coalescing Operator (a ?? b)"></a>Nil-Coalescing Operator (a ?? b)</h2><p>shorthand for the code below</p>
<pre><code>a != nil ? a! : b
</code></pre><p>unwraps an optional a if it contains a value, or returns a default value b if a is nil.</p>
<p>a is always of an optional type</p>
<p>The expression b must match the type that is stored inside a.</p>
<pre><code>let defaultColorName = &quot;red&quot;
var userDefinedColorName: String?   // defaults to nil

var colorNameToUse = userDefinedColorName ?? defaultColorName
// userDefinedColorName is nil, so colorNameToUse is set to the default of &quot;red&quot;
</code></pre><p>When assign Optional type value , that means unwrap first</p>
<pre><code>userDefinedColorName = &quot;green&quot;
colorNameToUse = userDefinedColorName ?? defaultColorName
// userDefinedColorName is not nil, so colorNameToUse is set to &quot;green&quot;
</code></pre><h1 id="Closures"><a href="#Closures" class="headerlink" title="Closures"></a>Closures</h1><h2 id="Three-forms"><a href="#Three-forms" class="headerlink" title="Three forms"></a>Three forms</h2><ul>
<li><p>Global functions are closures that have a name and do not capture any values.</p>
</li>
<li><p>Nested functions are closures that have a name and can capture values from their enclosing function.</p>
</li>
<li><p>Closure expressions are unnamed closures written in a lightweight syntax that can capture values from their surrounding context.</p>
</li>
</ul>
<h2 id="Closure-expressions"><a href="#Closure-expressions" class="headerlink" title="Closure expressions"></a>Closure expressions</h2><h3 id="Normal-Syntax-for-the-Sorted-Method"><a href="#Normal-Syntax-for-the-Sorted-Method" class="headerlink" title="Normal Syntax for the Sorted Method"></a>Normal Syntax for the Sorted Method</h3><pre><code>let names = [&quot;Chris&quot;, &quot;Alex&quot;, &quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;]
func backward(_ s1: String, _ s2: String) -&gt; Bool {
    return s1 &gt; s2
}
var reversedNames = names.sorted(by: backward)
// reversedNames is equal to [&quot;Ewa&quot;, &quot;Daniella&quot;, &quot;Chris&quot;, &quot;Barry&quot;, &quot;Alex&quot;]
</code></pre><h3 id="Closure-Expression-Syntax-inline"><a href="#Closure-Expression-Syntax-inline" class="headerlink" title="Closure Expression Syntax -inline"></a>Closure Expression Syntax -inline</h3><pre><code>{ (parameters) -&gt; return type in
    statements
}
</code></pre><p>Can be in-out parameters / Variadic parameters / Tuples</p>
<p>Cannot have default values</p>
<pre><code>reversedNames = names.sorted(by: { (s1: String, s2: String) -&gt; Bool in
    return s1 &gt; s2
})
</code></pre><h2 id="Inferring-Type-From-Context"><a href="#Inferring-Type-From-Context" class="headerlink" title="Inferring Type From Context"></a>Inferring Type From Context</h2><pre><code>reversedNames = names.sorted(by: { s1, s2 in return s1 &gt; s2 } )
</code></pre><h2 id="Implicit-Returns-from-Single-Expression-Closures"><a href="#Implicit-Returns-from-Single-Expression-Closures" class="headerlink" title="Implicit Returns from Single-Expression Closures"></a>Implicit Returns from Single-Expression Closures</h2><pre><code>reversedNames = names.sorted(by: { s1, s2 in s1 &gt; s2 } )
</code></pre><h2 id="Shorthand-Argument-Names"><a href="#Shorthand-Argument-Names" class="headerlink" title="Shorthand Argument Names"></a>Shorthand Argument Names</h2><p>Here, $0 and $1 refer to the closure’s first and second String arguments.</p>
<pre><code>reversedNames = names.sorted(by: { $0 &gt; $1 } )
</code></pre><h2 id="Operator-Methods"><a href="#Operator-Methods" class="headerlink" title="Operator Methods"></a>Operator Methods</h2><p>Swift’s String type defines its string-specific implementation of the greater-than operator (&gt;) as a method that has two parameters of type String, and returns a value of type Bool.</p>
<pre><code>reversedNames = names.sorted(by: &gt;)
</code></pre><h2 id="Trailing-Closures"><a href="#Trailing-Closures" class="headerlink" title="Trailing Closures"></a>Trailing Closures</h2><p>If you need to pass a closure expression to a function as the function’s final argument and the closure expression is long:</p>
<pre><code>func someFunctionThatTakesAClosure(closure: () -&gt; Void) {
// function body goes here
}

// Here&apos;s how you call this function without using a trailing closure:

someFunctionThatTakesAClosure(closure: {
// closure&apos;s body goes here
})

// Here&apos;s how you call this function with a trailing closure instead:

someFunctionThatTakesAClosure() {
// trailing closure&apos;s body goes here
}
</code></pre><p>Example1:Sort method</p>
<pre><code>reversedNames = names.sorted() { $0 &gt; $1 }
</code></pre><p>If a closure expression is provided as the function or method’s only argument, paranthesis can be drop altogether</p>
<pre><code>reversedNames = names.sorted { $0 &gt; $1 }
</code></pre><p>Example2: Map method (need to study further)</p>
<pre><code>let digitNames = [
    0: &quot;Zero&quot;, 1: &quot;One&quot;, 2: &quot;Two&quot;,   3: &quot;Three&quot;, 4: &quot;Four&quot;,
    5: &quot;Five&quot;, 6: &quot;Six&quot;, 7: &quot;Seven&quot;, 8: &quot;Eight&quot;, 9: &quot;Nine&quot;
]
let numbers = [16, 58, 510]

let strings = numbers.map {
(number) -&gt; String in
var number = number
var output = &quot;&quot;
repeat {
    output = digitNames[number % 10]! + output
    number /= 10
} while number &gt; 0
return output
}
// strings is inferred to be of type [String]
// its value is [&quot;OneSix&quot;, &quot;FiveEight&quot;, &quot;FiveOneZero&quot;]
</code></pre><h2 id="Capturing-Values"><a href="#Capturing-Values" class="headerlink" title="Capturing Values"></a>Capturing Values</h2><p>A closure can capture constants and variables from the surrounding context in which it is defined</p>
<p>capturing a reference to <code>runningTotal</code> and <code>amount</code> from the surrounding function and using them within its own function body.</p>
<p>Modify and stored them even surrounding context disapear</p>
<h3 id="Weapen-generator"><a href="#Weapen-generator" class="headerlink" title="Weapen generator"></a>Weapen generator</h3><pre><code>func makeIncrementer (forIncrement amount: Int) -&gt; () -&gt; Int {

    var runningTotal = 0

    func incrementer() -&gt; Int {
        runningTotal += amount
        return runningTotal
    }

    return incrementer
}
</code></pre><h3 id="Generate-Weapen"><a href="#Generate-Weapen" class="headerlink" title="Generate Weapen"></a>Generate Weapen</h3><pre><code>//Store its reference
let incrementByTen = makeIncrementer(forIncrement: 10)
let incrementBySeven = makeIncrementer(forIncrement: 7)
</code></pre><h3 id="Use-weapen"><a href="#Use-weapen" class="headerlink" title="Use weapen"></a>Use weapen</h3><pre><code>incrementByTen()
// returns a value of 10

incrementByTen()
// returns a value of 20

incrementByTen()
// returns a value of 30

incrementBySeven()
// returns a value of 7

incrementByTen()
// returns a value of 40

incrementBySeven()
// returns a value of 14
</code></pre><h2 id="Closures-Are-Reference-Types"><a href="#Closures-Are-Reference-Types" class="headerlink" title="Closures Are Reference Types"></a>Closures Are Reference Types</h2><p>Whenever you assign a function or a closure to a constant or a variable, you are actually setting that constant or variable to be a reference to the function or closure.</p>
<pre><code>let alsoIncrementByTen = incrementByTen
alsoIncrementByTen()
// returns a value of 50
</code></pre><h2 id="Escaping-Closures"><a href="#Escaping-Closures" class="headerlink" title="Escaping Closures"></a>Escaping Closures</h2><p>Escape:@escaping</p>
<ol>
<li>when the closure is passed as an argument to the function, but is called after the function returns.</li>
<li>One way that a closure can escape is by being stored in a variable that is defined outside the function.</li>
<li>have to refer to self explicitly within the closure</li>
</ol>
<p>NoEscape: default</p>
<ul>
<li>refer to self implicitly.</li>
</ul>
<pre><code>var completionHandlers: [() -&gt; Void] = []

func someFunctionWithEscapingClosure(completionHandler: @escaping () -&gt; Void) {

    completionHandlers.append(completionHandler)
}

func someFunctionWithNonescapingClosure(closure: () -&gt; Void) {
    closure()
}

class SomeClass {

    var x = 10

    func doSomething() {

        someFunctionWithEscapingClosure { self.x = 100 }

        someFunctionWithNonescapingClosure { x = 200 }
    }
}

let instance = SomeClass()

instance.doSomething()
print(instance.x)
// Prints &quot;200&quot;

completionHandlers.first?()
print(instance.x)
// Prints &quot;100&quot;
</code></pre><h2 id="Autoclosures"><a href="#Autoclosures" class="headerlink" title="Autoclosures"></a>Autoclosures</h2><p>An autoclosure is a closure that is automatically created to wrap an expression that’s being passed as an argument to a function.</p>
<p>An autoclosure lets you delay evaluation, because the code inside isn’t run until you call the closure.</p>
<p>Delays evaluation - <code>customersInLine</code> evaluation after <code>customerProvider</code> call</p>
<pre><code>var customersInLine = [&quot;Chris&quot;, &quot;Alex&quot;, &quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;]
print(customersInLine.count)
// Prints &quot;5&quot;

let customerProvider = { customersInLine.remove(at: 0) }
print(customersInLine.count)
// Prints &quot;5&quot;

print(&quot;Now serving \(customerProvider())!&quot;)
// Prints &quot;Now serving Chris!&quot;
print(customersInLine.count)
// Prints &quot;4&quot;
</code></pre><p>Delays evaluation - <code>customersInLine</code> evaluation after <code>serve</code> call</p>
<pre><code>// customersInLine is [&quot;Alex&quot;, &quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;]
func serve(customer customerProvider: () -&gt; String) {
    print(&quot;Now serving \(customerProvider())!&quot;)
}
serve(customer: { customersInLine.remove(at: 0) } )
// Prints &quot;Now serving Alex!&quot;
</code></pre><p>@autoclosure omit brace when function as argument</p>
<pre><code>// customersInLine is [&quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;]
func serve(customer customerProvider: @autoclosure () -&gt; String) {
    print(&quot;Now serving \(customerProvider())!&quot;)
}
serve(customer: customersInLine.remove(at: 0))
// Prints &quot;Now serving Ewa!&quot;
</code></pre><p>@autoclosure + @escaping</p>
<pre><code>// customersInLine is [&quot;Barry&quot;, &quot;Daniella&quot;]
var customerProviders: [() -&gt; String] = []
func collectCustomerProviders(_ customerProvider: @autoclosure @escaping () -&gt; String) {
    customerProviders.append(customerProvider)
}
collectCustomerProviders(customersInLine.remove(at: 0))
collectCustomerProviders(customersInLine.remove(at: 0))

print(&quot;Collected \(customerProviders.count) closures.&quot;)
// Prints &quot;Collected 2 closures.&quot;
for customerProvider in customerProviders {
    print(&quot;Now serving \(customerProvider())!&quot;)
}
// Prints &quot;Now serving Barry!&quot;
// Prints &quot;Now serving Daniella!&quot;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/19/WWWDC2016学习笔记Getting-started-with-swift/" itemprop="url">
                  WWWDC2016学习笔记Getting_started_with_swift
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-19T19:08:43+10:00" content="2016-09-19">
              2016-09-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IT/" itemprop="url" rel="index">
                    <span itemprop="name">IT</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/19/WWWDC2016学习笔记Getting-started-with-swift/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/19/WWWDC2016学习笔记Getting-started-with-swift/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Constants"><a href="#Constants" class="headerlink" title="Constants"></a>Constants</h1><p>常量为let,变量为var</p>
<pre><code>let language: String = &quot;Swift&quot;
let introduced: Int = 2014
let isAwesome: Bool = true
</code></pre><p>Type Inference</p>
<pre><code>let language = &quot;Swift&quot;    // Inferred as String
let introduced = 2014     // Inferred as Int
let isAwesome = true     // Inferred as Bool
</code></pre><h1 id="String"><a href="#String" class="headerlink" title="String"></a>String</h1><p>Building Strings</p>
<pre><code>let conference = &quot;WWDC&quot;
let message = &quot;Hello, &quot; + conference + &quot;!&quot;

// &quot;Hello, WWDC!&quot;
</code></pre><p>String Interpolation</p>
<pre><code>let conference = &quot;WWDC&quot;
let year = 2016
let message = &quot;Hello, \(conference) \(year + 1)!&quot;

// &quot;Hello, WWDC 2017!&quot;
</code></pre><p>Characters</p>
<pre><code>let dogString = &quot;Dog⁈🐶&quot;
print(&quot;\(dogString) is \(dogString.characters.count) characters long&quot;)

//Dog⁈🐶 is 5 characters long.
</code></pre><h1 id="Array-and-Dictionary"><a href="#Array-and-Dictionary" class="headerlink" title="Array and Dictionary"></a>Array and Dictionary</h1><pre><code>let names: [String] = [&quot;Lily&quot;, &quot;Santiago&quot;, &quot;Justyn&quot;, &quot;Aadya&quot;]    

let names = [&quot;Lily&quot;, &quot;Santiago&quot;, &quot;Justyn&quot;, &quot;Aadya&quot;] // Type Inference

let ages = [&quot;Mohsen&quot;: 17, &quot;Amy&quot;: 40, &quot;Graham&quot;: 5]
</code></pre><h2 id="Modifying-an-Array"><a href="#Modifying-an-Array" class="headerlink" title="Modifying an Array"></a>Modifying an Array</h2><pre><code>var packingList = [&quot;Socks&quot;, &quot;Shoes&quot;]    
//[&quot;Socks&quot;, &quot;Shoes&quot;]

print(packingList[0])    
//&quot;Socks&quot;

packingList.append(&quot;Trousers&quot;)    
//[&quot;Socks&quot;, &quot;Shoes&quot;, &quot;Trousers&quot;]

packingList[2] = &quot;Jeans&quot;    
//[&quot;Socks&quot;, &quot;Shoes&quot;, &quot;Jeans&quot;]

packingList.append(contentsOf: [&quot;Shorts&quot;, &quot;Sandals&quot;, &quot;Sunblock&quot;])
//[&quot;Socks&quot;, &quot;Shoes&quot;, &quot;Jeans&quot;, &quot;Shorts&quot;, &quot;Sandals&quot;, &quot;Sunblock&quot;]

packingList[3...5] = [&quot;Hoodie&quot;, &quot;Scarf&quot;]
//[&quot;Socks&quot;, &quot;Shoes&quot;, &quot;Jeans&quot;, &quot;Hoodie&quot;, &quot;Scarf&quot;]
</code></pre><h2 id="Modifying-a-Dictionary"><a href="#Modifying-a-Dictionary" class="headerlink" title="Modifying a Dictionary"></a>Modifying a Dictionary</h2><pre><code>var ages = [&quot;Mohsen&quot;: 17, &quot;Amy&quot;: 40, &quot;Graham&quot;: 5]
//[&quot;Mohsen&quot;: 17, &quot;Amy&quot;: 40, &quot;Graham&quot;: 5]

ages[&quot;Justyn&quot;] = 67 // Adds a new value for &quot;Justyn&quot;
//[&quot;Mohsen&quot;: 17, &quot;Amy&quot;: 40, &quot;Graham&quot;: 5, &quot;Justyn&quot;: 67]

ages[&quot;Justyn&quot;] = 68 // Changes the value for &quot;Justyn&quot;
//[&quot;Mohsen&quot;: 17, &quot;Amy&quot;: 40, &quot;Graham&quot;: 5, &quot;Justyn&quot;: 68]
</code></pre><h2 id="Retrieving-a-Value-from-a-Dictionary"><a href="#Retrieving-a-Value-from-a-Dictionary" class="headerlink" title="Retrieving a Value from a Dictionary"></a>Retrieving a Value from a Dictionary</h2><pre><code>let ages = [&quot;Mohsen&quot;: 17, &quot;Amy&quot;: 40, &quot;Graham&quot;: 5]
let possibleAge = ages[&quot;Amy&quot;]    
</code></pre><h1 id="While-amp-For-In-Loop"><a href="#While-amp-For-In-Loop" class="headerlink" title="While &amp; For-In Loop"></a>While &amp; For-In Loop</h1><h2 id="While-and-Repeat-While"><a href="#While-and-Repeat-While" class="headerlink" title="While and Repeat-While"></a>While and Repeat-While</h2><pre><code>while !endOfFile {
readLine()
}


repeat {
performTask()
} while tasksRemaining &gt; 0
</code></pre><h2 id="Characters"><a href="#Characters" class="headerlink" title="Characters"></a>Characters</h2><pre><code>let dogString = &quot;Dog⁈🐶&quot;
for character in dogString.characters {
print(character)
}
</code></pre><h2 id="Closed-Ranges"><a href="#Closed-Ranges" class="headerlink" title="Closed Ranges"></a>Closed Ranges</h2><pre><code>for number in 1...5 {
print(&quot;\(number) times 4 is \(number * 4)&quot;)
}
</code></pre><h2 id="Half-Closed-Ranges"><a href="#Half-Closed-Ranges" class="headerlink" title="Half-Closed Ranges"></a>Half-Closed Ranges</h2><pre><code>let results = [7, 52, 9, 33, 6, 12, 86, 4, 22, 18, 3]
let maxResultCount = 5
for index in 0..&lt;maxResultCount {
print(&quot;Result \(index) is \(results[index])&quot;)
}
</code></pre><h2 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h2><pre><code>for name in [&quot;Lily&quot;, &quot;Santiago&quot;, &quot;Justyn&quot;, &quot;Aadya&quot;] {
print(&quot;Hello, \(name)!&quot;)
}   
</code></pre><h2 id="Dictionaries"><a href="#Dictionaries" class="headerlink" title="Dictionaries"></a>Dictionaries</h2><pre><code>let ages = [&quot;Mohsen&quot;: 17, &quot;Amy&quot;: 40, &quot;Graham&quot;: 5]
for (name, age) in ages {
print(&quot;\(name) is \(age) years old&quot;)
}
</code></pre><h1 id="Condition"><a href="#Condition" class="headerlink" title="Condition"></a>Condition</h1><h2 id="If-Statement"><a href="#If-Statement" class="headerlink" title="If Statement"></a>If Statement</h2><pre><code>let age = 32
if age == 1 {
print(&quot;Happy first birthday!&quot;)
} else if age == 40 {
print(&quot;Happy 40th birthday!&quot;)
} else {
print(&quot;Happy plain old boring birthday.&quot;)
} 
</code></pre><h2 id="Switch-Statement（需要将所有情况都考虑到）"><a href="#Switch-Statement（需要将所有情况都考虑到）" class="headerlink" title="Switch Statement（需要将所有情况都考虑到）"></a>Switch Statement（需要将所有情况都考虑到）</h2><p>例子1</p>
<pre><code>let age = 32
switch age {
case 1:
    print(&quot;Happy first birthday!&quot;)
case 13...19:
    print(&quot;Happy birthday, teenager!&quot;)
case let decade where decade % 10 == 0:
    print(&quot;Happy significant \(decade)th birthday!&quot;)
default:
    print(&quot;Happy plain old boring birthday.&quot;)
}
</code></pre><p>例子2</p>
<pre><code>let userName = &quot;bob&quot;
let passwordIsValid = false
switch (userName, passwordIsValid) {
    case (&quot;admin&quot;, true):
print(&quot;Welcome back, administrator!&quot;)
    case (&quot;guest&quot;, _):
print(&quot;Guests are not allowed in this restricted area.&quot;)
    case (_, let isValid):
print(isValid ? &quot;Welcome to the restricted area!&quot; : &quot;ACCESS DENIED.&quot;)
}
</code></pre><h1 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h1><h2 id="Checking-for-an-Optional-Value"><a href="#Checking-for-an-Optional-Value" class="headerlink" title="Checking for an Optional Value"></a>Checking for an Optional Value</h2><pre><code>let ages = [&quot;Mohsen&quot;: 17, &quot;Amy&quot;: 40, &quot;Graham&quot;: 5]

let possibleAge: Int? = ages[&quot;Daryl&quot;]

if possibleAge == nil {
print(&quot;Age not found.&quot;)
}
</code></pre><h2 id="If-Let-Statement-when-use-optional"><a href="#If-Let-Statement-when-use-optional" class="headerlink" title="If-Let Statement(when use optional)"></a>If-Let Statement(when use optional)</h2><pre><code>let ages = [&quot;Mohsen&quot;: 17, &quot;Amy&quot;: 40, &quot;Graham&quot;: 5]

if let age = ages[&quot;Amy&quot;] {
print(&quot;An age of \(age) was found.&quot;)
}  

//An age of 40 was found.
</code></pre><h1 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h1><h2 id="Multiple-Parameters"><a href="#Multiple-Parameters" class="headerlink" title="Multiple Parameters"></a>Multiple Parameters</h2><pre><code>func sendMessage(recipient: String, shouting: Bool) {
var message = &quot;Hey there, \(recipient)!&quot;
if shouting {
    message = message.uppercased()
}
    print(message)
}
sendMessage(recipient: &quot;Morgan&quot;, shouting: false) 
</code></pre><h2 id="Explicit-Argument-Labels"><a href="#Explicit-Argument-Labels" class="headerlink" title="Explicit Argument Labels"></a>Explicit Argument Labels</h2><pre><code>func sendMessage(to recipient: String, shouting: Bool) {
var message = &quot;Hey there, \(recipient)!&quot;
if shouting {
    message = message.uppercased()
}
    print(message)
}
sendMessage(to: &quot;Morgan&quot;, shouting: false)
</code></pre><h2 id="Omitting-Argument-Labels"><a href="#Omitting-Argument-Labels" class="headerlink" title="Omitting Argument Labels"></a>Omitting Argument Labels</h2><pre><code>func sendMessage(_ message: String, to recipient: String, shouting: Bool) {
var message = &quot;\(message), \(recipient)!&quot;
if shouting {
    message = message.uppercased()
}
    print(message)
}
sendMessage(&quot;See you at the Bash&quot;, to: &quot;Morgan&quot;, shouting: false)
</code></pre><h2 id="Parameters-with-Default-Values"><a href="#Parameters-with-Default-Values" class="headerlink" title="Parameters with Default Values"></a>Parameters with Default Values</h2><pre><code>func sendMessage(_ message: String, to recipient: String, shouting: Bool = false) {
var message = &quot;\(message), \(recipient)!&quot;
if shouting {
    message = message.uppercased()
}
    print(message)
}
sendMessage(&quot;See you at the Bash&quot;, to: &quot;Morgan&quot;)
</code></pre><h2 id="Returning-Optional-Values"><a href="#Returning-Optional-Values" class="headerlink" title="Returning Optional Values"></a>Returning Optional Values</h2><pre><code>func firstString(havingPrefix prefix: String, in strings: [String]) -&gt; String? {
for string in strings {
if string.hasPrefix(prefix) {
return string
}
}
return nil
}
</code></pre><p>使用if-let，当使用optional value时</p>
<pre><code>var guests = [&quot;Jack&quot;, &quot;Kumar&quot;, &quot;Anita&quot;, &quot;Anna&quot;]
if let guest = firstString(havingPrefix: &quot;A&quot;, in: guests) {
print(&quot;See you at the party, \(guest)!&quot;)
} else {
print(&quot;Invite must be in the mail.&quot;)
}

//See you at the party, Anita!
</code></pre><h1 id="Closure"><a href="#Closure" class="headerlink" title="Closure"></a>Closure</h1><h2 id="Functions-as-Parameters"><a href="#Functions-as-Parameters" class="headerlink" title="Functions as Parameters"></a>Functions as Parameters</h2><pre><code>func filterInts(_ numbers: [Int], _ includeNumber: (Int) -&gt; Bool) -&gt; [Int] {
var result: [Int] = []
for number in numbers {
if includeNumber(number) {
    result.append(number)
}
}
    return result
}

let numbers = [4, 17, 34, 41, 82]

func divisibleByTwo(_ number: Int) -&gt; Bool {
    return number % 2 == 0
}
let evenNumbers = filterInts(numbers, divisibleByTwo)

//let evenNumbers = filterInts([4, 17, 34, 41, 82], divisibleByTwo)


print(evenNumbers)
</code></pre><h2 id="Implicit-Arguments-in-Closures"><a href="#Implicit-Arguments-in-Closures" class="headerlink" title="Implicit Arguments in Closures"></a>Implicit Arguments in Closures</h2><pre><code>func filterInts(_ numbers: [Int], _ includeNumber: (Int) -&gt; Bool) -&gt; [Int] {…}
let evenNumbers = filterInts(numbers, { $0 % 2 == 0 })
print(evenNumbers)
</code></pre><h2 id="Trailing-Closures"><a href="#Trailing-Closures" class="headerlink" title="Trailing Closures"></a>Trailing Closures</h2><pre><code>func filterInts(_ numbers: [Int], _ includeNumber: (Int) -&gt; Bool) -&gt; [Int] {…}
</code></pre><p>方式1.如果传递的闭包是最后一个参数，可以将其大括号移除到小括号后面方便阅读. $0代表第一个参数</p>
<pre><code>let evenNumbers = filterInts(numbers) { $0 % 2 == 0 }
print(evenNumbers)
</code></pre><p>方式2.</p>
<pre><code>let evenNumbers = filterInts(numbers) { (firstItem) -&gt; Bool in
    return firstItem % 2==0
}
print(evenNumbers)
</code></pre><p>如果闭包是唯一参数，可以将前面的小括号移除</p>
<pre><code>let names = [&quot;Lily&quot;, &quot;Santiago&quot;, &quot;Aadya&quot;, &quot;Jack&quot;, &quot;Anna&quot;, &quot;Andrés&quot;]
let shortNames = names.filter { name in name.characters.count &lt; 5 }
</code></pre><h2 id="Filter-and-Map-Methods"><a href="#Filter-and-Map-Methods" class="headerlink" title="Filter and Map Methods"></a>Filter and Map Methods</h2><pre><code>let names = [&quot;Lily&quot;, &quot;Santiago&quot;, &quot;Aadya&quot;, &quot;Jack&quot;, &quot;Anna&quot;, &quot;Andrés&quot;]

let capitalizedShortNames = names.filter { name in name.characters.count &lt; 5 }
    .map { name in name.uppercased() }

print(capitalizedShortNames)
</code></pre><h1 id="Generic"><a href="#Generic" class="headerlink" title="Generic"></a>Generic</h1><h2 id="Calling-Generic-Functions"><a href="#Calling-Generic-Functions" class="headerlink" title="Calling Generic Functions"></a>Calling Generic Functions</h2><pre><code>let numbers = [24,45,65,76,84,200,4]
let names = [&quot;Lily&quot;, &quot;Santiago&quot;, &quot;Aadya&quot;, &quot;Jack&quot;, &quot;Anna&quot;, &quot;Andrés&quot;]

func filter&lt;Element&gt;(_ source: [Element], _ includeElement: (Element) -&gt; Bool) -&gt; [Element] {
    var result: [Element] = []
    for element in source {
        if includeElement(element) {
            result.append(element)
        }
    }
    return result
}

let evenNumbers = filter(numbers) { $0 % 2 == 0 }
let shortNames = filter(names) { name in name.characters.count &lt; 5 }

print(evenNumbers)
print(shortNames)
</code></pre><h2 id="Generic-Types"><a href="#Generic-Types" class="headerlink" title="Generic Types"></a>Generic Types</h2><pre><code>struct NamedArray&lt;Element&gt; {
    var name: String
    var items: [Element]
}

let boardGames: NamedArray&lt;String&gt; = NamedArray(name: &quot;Board Games&quot;, items: [&quot;Chess&quot;, &quot;Go&quot;])
let primes: NamedArray&lt;Int&gt; = NamedArray(name: &quot;Primes&quot;, items: [1, 3, 5, 7, 13])

//Infer types
//let boardGames: NamedArray = NamedArray(name: &quot;Board Games&quot;, items: [&quot;Chess&quot;, &quot;Go&quot;])
//let primes: NamedArray = NamedArray(name: &quot;Primes&quot;, items: [1, 3, 5, 7, 13])

print(boardGames)
print(primes)
</code></pre><h1 id="Structures"><a href="#Structures" class="headerlink" title="Structures"></a>Structures</h1><pre><code>struct Rectangle {
    var width = 12
    var height = 10
}

var rectangle = Rectangle()
rectangle.height = 4


struct Rectangle {
var width: Int
var height: Int
}
var rectangle = Rectangle(width: 4, height: 5)
</code></pre><h2 id="Computed-Properties"><a href="#Computed-Properties" class="headerlink" title="Computed Properties"></a>Computed Properties</h2><pre><code>struct Rectangle {
    var width: Int
    var height: Int
    var area: Int {
        return width * height
    }
}
let rectangle = Rectangle(width: 4, height: 5)
print(&quot;Width is \(rectangle.width) and area is \(rectangle.area).&quot;)
</code></pre><h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><pre><code>struct Rectangle {
    var width: Int
    var height: Int
    func fitsInside(_ other: Rectangle) -&gt; Bool {
        return (width &lt; other.width) &amp;&amp; (height &lt; other.height)
    }
}
let small = Rectangle(width: 1, height: 2)
let large = Rectangle(width: 5, height: 5)

print(small.fitsInside(large)) // Returns true
</code></pre><h2 id="Initializers"><a href="#Initializers" class="headerlink" title="Initializers"></a>Initializers</h2><p>自动生成init method</p>
<pre><code>struct Rectangle {
    var width: Int
    var height: Int
}

var rectangl = Rectangle(width: 4, height: 5)
</code></pre><p>也可以自己明确的写一个init method</p>
<pre><code>struct Rectangle {
    var width: Int
    var height: Int

    init(width: Int, height: Int) {
        self.width = width
        self.height = height
    }
}
var rectangle = Rectangle(width: 4, height: 5)
</code></pre><h1 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h1><pre><code>class ScoreLogFile {
    var highScores: [Score]
    func record(score: Score, for player: Player) -&gt; Void {…}
}
</code></pre><h2 id="Subclasses-Can-Add-Functionality"><a href="#Subclasses-Can-Add-Functionality" class="headerlink" title="Subclasses Can Add Functionality"></a>Subclasses Can Add Functionality</h2><pre><code>class Fish {
    func swim() {
        print(&quot;I&apos;m swimming.&quot;)
    }
}

class FlyingFish: Fish {
    func fly() {
        print(&quot;Flying throught the air!&quot;)
    }
    // Inherits swim() with no changes.
}
</code></pre><h2 id="Subclasses-Can-Override-Functionality"><a href="#Subclasses-Can-Override-Functionality" class="headerlink" title="Subclasses Can Override Functionality"></a>Subclasses Can Override Functionality</h2><p>需要加上override字符，否则会报错</p>
<pre><code>class Fish {
    func swim() {
        print(&quot;I&apos;m swimming.&quot;)
    }
}

class ComplainingFish: Fish {
   override func swim() {
        print(&quot;Grumble grumble grumble...&quot;)
        //super.swim()
    }
}
</code></pre><h2 id="Subclass-Initializers"><a href="#Subclass-Initializers" class="headerlink" title="Subclass Initializers"></a>Subclass Initializers</h2><pre><code>class Fish {
    var name: String
    init(name: String) {
        self.name = name
    }
}

class ComplainingFish: Fish {
    var complaint: String
    init(name: String, complaint: String) {
        self.complaint = complaint
        super.init(name: name)
    }
}
</code></pre><h1 id="Class-vs-Structure"><a href="#Class-vs-Structure" class="headerlink" title="Class vs. Structure"></a>Class vs. Structure</h1><ol>
<li><p>可以复制，不相互影响的object，采用structure。例如两个球员，他们各自的比分</p>
</li>
<li><p>可以方便被多处访问的同一个object,采用class。例如比赛记分册，需要被多个球员同时访问。一旦更新，大家都能看见</p>
</li>
<li><p>需要被继承的，采用Class</p>
<p><img src="https://www.dropbox.com/s/gmaj0jp2hge5547/2016092001.png?dl=1" alt=""></p>
</li>
</ol>
<h1 id="Enumerations"><a href="#Enumerations" class="headerlink" title="Enumerations"></a>Enumerations</h1><pre><code>enum Alignment {
    case left, right, center
}

let textAlignment = Alignment.left
switch textAlignment {
case .left:
    print(&quot;Lean to the left&quot;)
case .right:
    print(&quot;Lean to the right&quot;)
case .center:
    print(&quot;Stand up straight&quot;)
}
</code></pre><h2 id="Enumerations-with-Associated-Values"><a href="#Enumerations-with-Associated-Values" class="headerlink" title="Enumerations with Associated Values"></a>Enumerations with Associated Values</h2><pre><code>enum Alignment {

    case left(padding: Double), right(padding: Double), center
}

let textAlignment = Alignment.left(padding: 42.7)

switch textAlignment {

case .left(let padding):
    print(&quot;Left with \(padding) pixels of padding&quot;)

default:
    print(&quot;this is default&quot;)
}
</code></pre><h2 id="Enumerations-with-Raw-Values"><a href="#Enumerations-with-Raw-Values" class="headerlink" title="Enumerations with Raw Values"></a>Enumerations with Raw Values</h2><pre><code>enum ServerAddress: String {
    case staging = &quot;https://staging.example.com&quot;
    case production = &quot;https://example.com&quot;
}

func findPhotos(matchingQuery query: String, from server: ServerAddress) {
    let serverAddress = server.rawValue
    …
}

findPhotos(matchingQuery: &quot;strawberry&quot;, from: .staging)
</code></pre><h1 id="Protocols-amp-Extension"><a href="#Protocols-amp-Extension" class="headerlink" title="Protocols &amp; Extension"></a>Protocols &amp; Extension</h1><h2 id="Protocols"><a href="#Protocols" class="headerlink" title="Protocols"></a>Protocols</h2><p>protocol is like blueprint ,like interface or abstract classes</p>
<pre><code>protocol Player {
    func takeTurn(on board: Board)
}
struct HumanPlayer: Player {
    func takeTurn(on board: Board) { /* Show move UI and wait */ }
}
struct ComputerPlayer: Player {
    func takeTurn(on board: Board) { /* Pick the best legal move using AI */ }
}
</code></pre><h2 id="Extensions-for-additional-functionality"><a href="#Extensions-for-additional-functionality" class="headerlink" title="Extensions for additional functionality"></a>Extensions for additional functionality</h2><pre><code>struct Rectangle {
    var width: Int
    var height: Int
}

extension Rectangle {
    func fitsInside(_ other: Rectangle) -&gt; Bool {…}
    var area {…}
}
</code></pre><h2 id="Protocols-Extensions"><a href="#Protocols-Extensions" class="headerlink" title="Protocols + Extensions"></a>Protocols + Extensions</h2><pre><code>struct HumanPlayer: Player {…}
extension HumanPlayer: CustomStringConvertible {
    var description: String {
        return &quot;Human player \(name) has a score of \(score)&quot;
    }
}
let player = HumanPlayer(name: &quot;Lynn&quot;, score: 0)
print(player)
</code></pre><h1 id="Error-Handling"><a href="#Error-Handling" class="headerlink" title="Error Handling"></a>Error Handling</h1><pre><code>enum SomeError: ErrorProtocol {
    case somethingWentWrong, somethingFailed
}
func doSomething() throws -&gt; Data {
    progressBar.visible = true
    defer { progressBar.visible = false }
    let data: Data?
    do {
        data = try somethingThatMightFail()
    } catch SomeError.somethingWentWrong {
        data = nil
    }
    guard let result = summarize(data) else { throw SomeError.somethingFailed }
    return result
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Jack Liu" />
          <p class="site-author-name" itemprop="name">Jack Liu</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">112</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">38</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jack Liu</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'cowboyTech';
      var disqus_identifier = 'page/2/index.html';
      var disqus_title = '';
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  



  
  
  

  

  

</body>
</html>
